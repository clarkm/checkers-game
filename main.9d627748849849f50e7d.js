var qG=Object.defineProperty,zG=Object.defineProperties,QG=Object.getOwnPropertyDescriptors,OS=Object.getOwnPropertySymbols,KG=Object.prototype.hasOwnProperty,YG=Object.prototype.propertyIsEnumerable,FS=(Ze,Ie,We)=>Ie in Ze?qG(Ze,Ie,{enumerable:!0,configurable:!0,writable:!0,value:We}):Ze[Ie]=We,LS=(Ze,Ie)=>{for(var We in Ie||(Ie={}))KG.call(Ie,We)&&FS(Ze,We,Ie[We]);if(OS)for(var We of OS(Ie))YG.call(Ie,We)&&FS(Ze,We,Ie[We]);return Ze},VS=(Ze,Ie)=>zG(Ze,QG(Ie));(self.webpackChunkcheckers_game=self.webpackChunkcheckers_game||[]).push([[179],{255:Ze=>{function Ie(We){return Promise.resolve().then(()=>{var ir=new Error("Cannot find module '"+We+"'");throw ir.code="MODULE_NOT_FOUND",ir})}Ie.keys=()=>[],Ie.resolve=Ie,Ie.id=255,Ze.exports=Ie},9:(Ze,Ie,We)=>{"use strict";function ir(t){return"function"==typeof t}let Oc=!1;const qt={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else Oc&&console.log("RxJS: Back to a better error behavior. Thank you. <3");Oc=t},get useDeprecatedSynchronousErrorHandling(){return Oc}};function bi(t){setTimeout(()=>{throw t},0)}const Ua={closed:!0,next(t){},error(t){if(qt.useDeprecatedSynchronousErrorHandling)throw t;bi(t)},complete(){}},BS=Array.isArray||(t=>t&&"number"==typeof t.length);function xm(t){return null!==t&&"object"==typeof t}const ja=(()=>{function t(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((n,r)=>`${r+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return t.prototype=Object.create(Error.prototype),t})();class De{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:r,_unsubscribe:i,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof De)n.remove(this);else if(null!==n)for(let o=0;o<n.length;++o)n[o].remove(this);if(ir(i)){r&&(this._unsubscribe=void 0);try{i.call(this)}catch(o){e=o instanceof ja?km(o.errors):[o]}}if(BS(s)){let o=-1,a=s.length;for(;++o<a;){const l=s[o];if(xm(l))try{l.unsubscribe()}catch(u){e=e||[],u instanceof ja?e=e.concat(km(u.errors)):e.push(u)}}}if(e)throw new ja(e)}add(e){let n=e;if(!e)return De.EMPTY;switch(typeof e){case"function":n=new De(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof De)){const s=n;n=new De,n._subscriptions=[s]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof De){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(e){const n=this._subscriptions;if(n){const r=n.indexOf(e);-1!==r&&n.splice(r,1)}}}var t;function km(t){return t.reduce((e,n)=>e.concat(n instanceof ja?n.errors:n),[])}De.EMPTY=((t=new De).closed=!0,t);const Ha="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class _t extends De{constructor(e,n,r){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=Ua;break;case 1:if(!e){this.destination=Ua;break}if("object"==typeof e){e instanceof _t?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new Om(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new Om(this,e,n,r)}}[Ha](){return this}static create(e,n,r){const i=new _t(e,n,r);return i.syncErrorThrowable=!1,i}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class Om extends _t{constructor(e,n,r,i){super(),this._parentSubscriber=e;let s,o=this;ir(n)?s=n:n&&(s=n.next,r=n.error,i=n.complete,n!==Ua&&(o=Object.create(n),ir(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=r,this._complete=i}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:n}=this;qt.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?this.__tryOrSetError(n,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:n}=this,{useDeprecatedSynchronousErrorHandling:r}=qt;if(this._error)r&&n.syncErrorThrowable?(this.__tryOrSetError(n,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(n.syncErrorThrowable)r?(n.syncErrorValue=e,n.syncErrorThrown=!0):bi(e),this.unsubscribe();else{if(this.unsubscribe(),r)throw e;bi(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const n=()=>this._complete.call(this._context);qt.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,n){try{e.call(this._context,n)}catch(r){if(this.unsubscribe(),qt.useDeprecatedSynchronousErrorHandling)throw r;bi(r)}}__tryOrSetError(e,n,r){if(!qt.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,r)}catch(i){return qt.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=i,e.syncErrorThrown=!0,!0):(bi(i),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const Hs="function"==typeof Symbol&&Symbol.observable||"@@observable";function Fm(t){return t}let ct=(()=>{class t{constructor(n){this._isScalar=!1,n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const{operator:s}=this,o=function(t,e,n){if(t){if(t instanceof _t)return t;if(t[Ha])return t[Ha]()}return t||e||n?new _t(t,e,n):new _t(Ua)}(n,r,i);if(o.add(s?s.call(o,this.source):this.source||qt.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),qt.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){qt.useDeprecatedSynchronousErrorHandling&&(n.syncErrorThrown=!0,n.syncErrorValue=r),function(t){for(;t;){const{closed:e,destination:n,isStopped:r}=t;if(e||r)return!1;t=n&&n instanceof _t?n:null}return!0}(n)?n.error(r):console.warn(r)}}forEach(n,r){return new(r=Vm(r))((i,s)=>{let o;o=this.subscribe(a=>{try{n(a)}catch(l){s(l),o&&o.unsubscribe()}},s,i)})}_subscribe(n){const{source:r}=this;return r&&r.subscribe(n)}[Hs](){return this}pipe(...n){return 0===n.length?this:function(t){return 0===t.length?Fm:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}(n)(this)}toPromise(n){return new(n=Vm(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function Vm(t){if(t||(t=qt.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const $s=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class HS extends De{constructor(e,n){super(),this.subject=e,this.subscriber=n,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,n=e.observers;if(this.subject=null,!n||0===n.length||e.isStopped||e.closed)return;const r=n.indexOf(this.subscriber);-1!==r&&n.splice(r,1)}}class Bm extends _t{constructor(e){super(e),this.destination=e}}let Fc=(()=>{class t extends ct{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[Ha](){return new Bm(this)}lift(n){const r=new Um(this,this);return r.operator=n,r}next(n){if(this.closed)throw new $s;if(!this.isStopped){const{observers:r}=this,i=r.length,s=r.slice();for(let o=0;o<i;o++)s[o].next(n)}}error(n){if(this.closed)throw new $s;this.hasError=!0,this.thrownError=n,this.isStopped=!0;const{observers:r}=this,i=r.length,s=r.slice();for(let o=0;o<i;o++)s[o].error(n);this.observers.length=0}complete(){if(this.closed)throw new $s;this.isStopped=!0;const{observers:n}=this,r=n.length,i=n.slice();for(let s=0;s<r;s++)i[s].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(n){if(this.closed)throw new $s;return super._trySubscribe(n)}_subscribe(n){if(this.closed)throw new $s;return this.hasError?(n.error(this.thrownError),De.EMPTY):this.isStopped?(n.complete(),De.EMPTY):(this.observers.push(n),new HS(this,n))}asObservable(){const n=new ct;return n.source=this,n}}return t.create=(e,n)=>new Um(e,n),t})();class Um extends Fc{constructor(e,n){super(),this.destination=e,this.source=n}next(e){const{destination:n}=this;n&&n.next&&n.next(e)}error(e){const{destination:n}=this;n&&n.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:n}=this;return n?this.source.subscribe(e):De.EMPTY}}class GS{constructor(e,n){this.project=e,this.thisArg=n}call(e,n){return n.subscribe(new qS(e,this.project,this.thisArg))}}class qS extends _t{constructor(e,n,r){super(e),this.project=n,this.count=0,this.thisArg=r||this}_next(e){let n;try{n=this.project.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}this.destination.next(n)}}const jm=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()},$a="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",Hm=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function $m(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const Wm=t=>{if(t&&"function"==typeof t[Hs])return(t=>e=>{const n=t[Hs]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)})(t);if(Hm(t))return jm(t);if($m(t))return(t=>e=>(t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,bi),e))(t);if(t&&"function"==typeof t[$a])return(t=>e=>{const n=t[$a]();for(;;){let r;try{r=n.next()}catch(i){return e.error(i),e}if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e})(t);{const n=`You provided ${xm(t)?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(n)}};function Gm(t,e){return new ct(n=>{const r=new De;let i=0;return r.add(e.schedule(function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()})),r})}class iA extends _t{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class sA extends _t{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function qm(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(qm((i,s)=>function(t,e){return t instanceof ct?t:new ct(Wm(t))}(t(i,s)).pipe(function(t,e){return function(r){return r.lift(new GS(t,undefined))}}((o,a)=>e(i,o,s,a))),n)):("number"==typeof e&&(n=e),r=>r.lift(new aA(t,n)))}class aA{constructor(e,n=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=n}call(e,n){return n.subscribe(new lA(e,this.project,this.concurrent))}}class lA extends sA{constructor(e,n,r=Number.POSITIVE_INFINITY){super(e),this.project=n,this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let n;const r=this.index++;try{n=this.project(e,r)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(n)}_innerSub(e){const n=new iA(this),r=this.destination;r.add(n);const i=function(t,e){if(e.closed)return;if(t instanceof ct)return t.subscribe(e);let n;try{n=Wm(t)(e)}catch(r){e.error(r)}return n}(e,n);i!==n&&r.add(i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function zm(){return function(e){return e.lift(new fA(e))}}class fA{constructor(e){this.connectable=e}call(e,n){const{connectable:r}=this;r._refCount++;const i=new hA(e,r),s=n.subscribe(i);return i.closed||(i.connection=r.connect()),s}}class hA extends _t{constructor(e,n){super(e),this.connectable=n}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const n=e._refCount;if(n<=0)return void(this.connection=null);if(e._refCount=n-1,n>1)return void(this.connection=null);const{connection:r}=this,i=e._connection;this.connection=null,i&&(!r||i===r)&&i.unsubscribe()}}class pA extends ct{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new De,e.add(this.source.subscribe(new _A(this.getSubject(),this))),e.closed&&(this._connection=null,e=De.EMPTY)),e}refCount(){return zm()(this)}}const gA=(()=>{const t=pA.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class _A extends Bm{constructor(e,n){super(e),this.connectable=n}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const n=e._connection;e._refCount=0,e._subject=null,e._connection=null,n&&n.unsubscribe()}}}function EA(){return new Fc}function Y(t){for(let e in t)if(t[e]===Y)return e;throw Error("Could not find renamed property on target object.")}function U(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(U).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Vc(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const IA=Y({__forward_ref__:Y});function Bc(t){return t.__forward_ref__=Bc,t.toString=function(){return U(this())},t}function S(t){return function(t){return"function"==typeof t&&t.hasOwnProperty(IA)&&t.__forward_ref__===Bc}(t)?t():t}class sr extends Error{constructor(e,n){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(e,n)),this.code=e}}function O(t){return"string"==typeof t?t:null==t?"":String(t)}function Xe(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():O(t)}function Wa(t,e){const n=e?` in ${e}`:"";throw new sr("201",`No provider for ${Xe(t)} found${n}`)}function yt(t,e){null==t&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function te(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Fr(t){return{providers:t.providers||[],imports:t.imports||[]}}function Vn(t){return Km(t,Ga)||Km(t,Jm)}function Km(t,e){return t.hasOwnProperty(e)?t[e]:null}function Ym(t){return t&&(t.hasOwnProperty(jc)||t.hasOwnProperty(NA))?t[jc]:null}const Ga=Y({\u0275prov:Y}),jc=Y({\u0275inj:Y}),Jm=Y({ngInjectableDef:Y}),NA=Y({ngInjectorDef:Y});var N=(()=>((N=N||{})[N.Default=0]="Default",N[N.Host=1]="Host",N[N.Self=2]="Self",N[N.SkipSelf=4]="SkipSelf",N[N.Optional=8]="Optional",N))();let Hc;function or(t){const e=Hc;return Hc=t,e}function Zm(t,e,n){const r=Vn(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&N.Optional?null:void 0!==e?e:void Wa(U(t),"Injector")}function ar(t){return{toString:t}.toString()}var Rt=(()=>((Rt=Rt||{})[Rt.OnPush=0]="OnPush",Rt[Rt.Default=1]="Default",Rt))(),Ae=(()=>((Ae=Ae||{})[Ae.Emulated=0]="Emulated",Ae[Ae.None=2]="None",Ae[Ae.ShadowDom=3]="ShadowDom",Ae))();const PA="undefined"!=typeof globalThis&&globalThis,MA="undefined"!=typeof window&&window,xA="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,J=PA||"undefined"!=typeof global&&global||MA||xA,wi={},ne=[],qa=Y({\u0275cmp:Y}),$c=Y({\u0275dir:Y}),Wc=Y({\u0275pipe:Y}),Xm=Y({\u0275mod:Y}),kA=Y({\u0275loc:Y}),Bn=Y({\u0275fac:Y}),Ws=Y({__NG_ELEMENT_ID__:Y});let OA=0;function Gc(t){return ar(()=>{const n={},r={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Rt.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||ne,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Ae.Emulated,id:"c",styles:t.styles||ne,_:null,setInput:null,schemas:t.schemas||null,tView:null},i=t.directives,s=t.features,o=t.pipes;return r.id+=OA++,r.inputs=ry(t.inputs,n),r.outputs=ry(t.outputs),s&&s.forEach(a=>a(r)),r.directiveDefs=i?()=>("function"==typeof i?i():i).map(ey):null,r.pipeDefs=o?()=>("function"==typeof o?o():o).map(ty):null,r})}function ey(t){return Ge(t)||function(t){return t[$c]||null}(t)}function ty(t){return function(t){return t[Wc]||null}(t)}const ny={};function Gs(t){return ar(()=>{const e={type:t.type,bootstrap:t.bootstrap||ne,declarations:t.declarations||ne,imports:t.imports||ne,exports:t.exports||ne,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(ny[t.id]=t.type),e})}function ry(t,e){if(null==t)return wi;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}const Pt=Gc;function Ge(t){return t[qa]||null}function Mt(t,e){const n=t[Xm]||null;if(!n&&!0===e)throw new Error(`Type ${U(t)} does not have '\u0275mod' property.`);return n}const V=11;function pn(t){return Array.isArray(t)&&"object"==typeof t[1]}function Qt(t){return Array.isArray(t)&&!0===t[1]}function Qc(t){return 0!=(8&t.flags)}function Ya(t){return 2==(2&t.flags)}function Ja(t){return 1==(1&t.flags)}function Kt(t){return null!==t.template}function HA(t){return 0!=(512&t[2])}function jr(t,e){return t.hasOwnProperty(Bn)?t[Bn]:null}class sy{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function oy(t){return t.type.prototype.ngOnChanges&&(t.setInput=qA),GA}function GA(){const t=ly(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===wi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function qA(t,e,n,r){const i=ly(t)||function(t,e){return t[ay]=e}(t,{previous:wi,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[n],l=o[a];s[a]=new sy(l&&l.currentValue,e,o===wi),t[r]=e}const ay="__ngSimpleChanges__";function ly(t){return t[ay]||null}let Jc;function Ee(t){return!!t.listen}const dy={createRenderer:(t,e)=>void 0!==Jc?Jc:"undefined"!=typeof document?document:void 0};function we(t){for(;Array.isArray(t);)t=t[0];return t}function Et(t,e){return we(e[t.index])}function Xc(t,e){return t.data[e]}function Ct(t,e){const n=e[t];return pn(n)?n:n[0]}function ed(t){return 128==(128&t[2])}function ur(t,e){return null==e?null:t[e]}function hy(t){t[18]=0}function td(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const P={lFrame:Iy(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function py(){return P.bindingsEnabled}function E(){return P.lFrame.lView}function Q(){return P.lFrame.tView}function Ne(){let t=_y();for(;null!==t&&64===t.type;)t=t.parent;return t}function _y(){return P.lFrame.currentTNode}function gn(t,e){const n=P.lFrame;n.currentTNode=t,n.isParent=e}function nd(){return P.lFrame.isParent}function el(){return P.isInCheckNoChangesMode}function tl(t){P.isInCheckNoChangesMode=t}function tt(){const t=P.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Pi(){return P.lFrame.bindingIndex++}function aN(t,e){const n=P.lFrame;n.bindingIndex=n.bindingRootIndex=t,id(e)}function id(t){P.lFrame.currentDirectiveIndex=t}function od(t){P.lFrame.currentQueryIndex=t}function uN(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function Ey(t,e,n){if(n&N.SkipSelf){let i=e,s=t;for(;!(i=i.parent,null!==i||n&N.Host||(i=uN(s),null===i||(s=s[15],10&i.type))););if(null===i)return!1;e=i,t=s}const r=P.lFrame=Cy();return r.currentTNode=e,r.lView=t,!0}function nl(t){const e=Cy(),n=t[1];P.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Cy(){const t=P.lFrame,e=null===t?null:t.child;return null===e?Iy(t):e}function Iy(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function Dy(){const t=P.lFrame;return P.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const by=Dy;function rl(){const t=Dy();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function nt(){return P.lFrame.selectedIndex}function cr(t){P.lFrame.selectedIndex=t}function il(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:c}=s;o&&(t.contentHooks||(t.contentHooks=[])).push(-n,o),a&&((t.contentHooks||(t.contentHooks=[])).push(n,a),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,a)),l&&(t.viewHooks||(t.viewHooks=[])).push(-n,l),u&&((t.viewHooks||(t.viewHooks=[])).push(n,u),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,u)),null!=c&&(t.destroyHooks||(t.destroyHooks=[])).push(n,c)}}function sl(t,e,n){wy(t,e,3,n)}function ol(t,e,n,r){(3&t[2])===n&&wy(t,e,n,r)}function ad(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function wy(t,e,n,r){const s=null!=r?r:-1,o=e.length-1;let a=0;for(let l=void 0!==r?65535&t[18]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(t[18]+=65536),(a<s||-1==s)&&(yN(t,n,e,l),t[18]=(4294901760&t[18])+l+2),l++}function yN(t,e,n,r){const i=n[r]<0,s=n[r+1],a=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class Ys{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function al(t,e,n){const r=Ee(t);let i=0;for(;i<n.length;){const s=n[i];if("number"==typeof s){if(0!==s)break;i++;const o=n[i++],a=n[i++],l=n[i++];r?t.setAttribute(e,a,l,o):e.setAttributeNS(o,a,l)}else{const o=s,a=n[++i];ud(o)?r&&t.setProperty(e,o,a):r?t.setAttribute(e,o,a):e.setAttribute(o,a),i++}}return i}function Ty(t){return 3===t||4===t||6===t}function ud(t){return 64===t.charCodeAt(0)}function ll(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Sy(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Sy(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}function Ay(t){return-1!==t}function Mi(t){return 32767&t}function xi(t,e){let n=function(t){return t>>16}(t),r=e;for(;n>0;)r=r[15],n--;return r}let cd=!0;function ul(t){const e=cd;return cd=t,e}let bN=0;function Zs(t,e){const n=fd(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,dd(r.data,t),dd(e,null),dd(r.blueprint,null));const i=cl(t,e),s=t.injectorIndex;if(Ay(i)){const o=Mi(i),a=xi(i,e),l=a[1].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|l[o+u]}return e[s+8]=i,s}function dd(t,e){t.push(0,0,0,0,0,0,0,0,e)}function fd(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function cl(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const s=i[1],o=s.type;if(r=2===o?s.declTNode:1===o?i[6]:null,null===r)return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function dl(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ws)&&(r=n[Ws]),null==r&&(r=n[Ws]=bN++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Py(t,e,n){if(n&N.Optional)return t;Wa(e,"NodeInjector")}function My(t,e,n,r){if(n&N.Optional&&void 0===r&&(r=null),0==(n&(N.Self|N.Host))){const i=t[9],s=or(void 0);try{return i?i.get(e,r,n&N.Optional):Zm(e,r,n&N.Optional)}finally{or(s)}}return Py(r,e,n)}function xy(t,e,n,r=N.Default,i){if(null!==t){const s=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Ws)?t[Ws]:void 0;return"number"==typeof e?e>=0?255&e:SN:e}(n);if("function"==typeof s){if(!Ey(e,t,r))return r&N.Host?Py(i,n,r):My(e,n,r,i);try{const o=s(r);if(null!=o||r&N.Optional)return o;Wa(n)}finally{by()}}else if("number"==typeof s){let o=null,a=fd(t,e),l=-1,u=r&N.Host?e[16][6]:null;for((-1===a||r&N.SkipSelf)&&(l=-1===a?cl(t,e):e[a+8],-1!==l&&Fy(r,!1)?(o=e[1],a=Mi(l),e=xi(l,e)):a=-1);-1!==a;){const c=e[1];if(Oy(s,a,c.data)){const d=AN(a,e,n,o,r,u);if(d!==ky)return d}l=e[a+8],-1!==l&&Fy(r,e[1].data[a+8]===u)&&Oy(s,a,e)?(o=c,a=Mi(l),e=xi(l,e)):a=-1}}}return My(e,n,r,i)}const ky={};function SN(){return new ki(Ne(),E())}function AN(t,e,n,r,i,s){const o=e[1],a=o.data[t+8],c=function(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,l=t.directiveStart,c=s>>20,f=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<f;h++){const p=o[h];if(h<l&&n===p||h>=l&&p.type===n)return h}if(i){const h=o[l];if(h&&Kt(h)&&h.type===n)return l}return null}(a,o,n,null==r?Ya(a)&&cd:r!=o&&0!=(3&a.type),i&N.Host&&s===a);return null!==c?Xs(e,o,c,a):ky}function Xs(t,e,n,r){let i=t[n];const s=e.data;if(function(t){return t instanceof Ys}(i)){const o=i;o.resolving&&function(t,e){throw new sr("200",`Circular dependency in DI detected for ${t}`)}(Xe(s[n]));const a=ul(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?or(o.injectImpl):null;Ey(t,r,N.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=oy(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s))}(n,s[n],e)}finally{null!==l&&or(l),ul(a),o.resolving=!1,by()}}return i}function Oy(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Fy(t,e){return!(t&N.Self||t&N.Host&&e)}class ki{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return xy(this._tNode,this._lView,e,r,n)}}const Fi="__parameters__";function Hr(t,e,n){return ar(()=>{const r=function(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(l,u,c){const d=l.hasOwnProperty(Fi)?l[Fi]:Object.defineProperty(l,Fi,{value:[]})[Fi];for(;d.length<=c;)d.push(null);return(d[c]=d[c]||[]).push(o),l}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class re{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=te({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}toString(){return`InjectionToken ${this._desc}`}}function mn(t,e){t.forEach(n=>Array.isArray(n)?mn(n,e):e(n))}function pl(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function $r(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}const ro={},vd="__NG_DI_FLAG__",Bi="ngTempTokenPath",HN=/\n/gm,Ed="__source",Cd=Y({provide:String,useValue:Y});let io;function Ui(t){const e=io;return io=t,e}function WN(t,e=N.Default){if(void 0===io)throw new Error("inject() must be called from an injection context");return null===io?Zm(t,void 0,e):io.get(t,e&N.Optional?null:void 0,e)}function q(t,e=N.Default){return(Hc||WN)(S(t),e)}function Wr(t){const e=[];for(let n=0;n<t.length;n++){const r=S(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let i,s=N.Default;for(let o=0;o<r.length;o++){const a=r[o],l=GN(a);"number"==typeof l?-1===l?i=a.token:s|=l:i=a}e.push(q(i,s))}else e.push(q(r))}return e}function so(t,e){return t[vd]=e,t.prototype[vd]=e,t}function GN(t){return t[vd]}function Hy(t,e,n,r){const i=t[Bi];throw e[Ed]&&i.unshift(e[Ed]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=U(e);if(Array.isArray(e))i=e.map(U).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):U(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(HN,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[Bi]=null,t}const oo=so(Hr("Inject",t=>({token:t})),-1),yn=so(Hr("Optional"),8),Gr=so(Hr("SkipSelf"),4);var Dt=(()=>((Dt=Dt||{})[Dt.Important=1]="Important",Dt[Dt.DashCase=2]="DashCase",Dt))();const Qy="__ngContext__";function ze(t,e){t[Qy]=e}function bd(t){const e=function(t){return t[Qy]||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Td(t,e){return undefined(t,e)}function uo(t){const e=t[3];return Qt(e)?e[3]:e}function Sd(t){return tv(t[13])}function Ad(t){return tv(t[4])}function tv(t){for(;null!==t&&!Qt(t);)t=t[4];return t}function Hi(t,e,n,r,i){if(null!=r){let s,o=!1;Qt(r)?s=r:pn(r)&&(o=!0,r=r[0]);const a=we(r);0===t&&null!==n?null==i?av(e,n,a):qr(e,n,a,i||null,!0):1===t&&null!==n?qr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=vl(t,e);r&&function(t,e,n,r){Ee(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function(t,e,n,r,i){const s=n[7];s!==we(n)&&Hi(e,t,r,s,i);for(let a=10;a<n.length;a++){const l=n[a];co(l[1],l,t,e,r,s)}}(e,t,s,n,i)}}function Rd(t,e,n){return Ee(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function rv(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,td(i,-1)),n.splice(r,1)}function Pd(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const i=r[17];null!==i&&i!==t&&rv(i,r),e>0&&(t[n-1][4]=r[4]);const s=$r(t,10+e);!function(t,e){co(t,e,e[V],2,null,null),e[0]=null,e[6]=null}(r[1],r);const o=s[19];null!==o&&o.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function iv(t,e){if(!(256&e[2])){const n=e[V];Ee(n)&&n.destroyNode&&co(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Md(t[1],t);for(;e;){let n=null;if(pn(e))n=e[13];else{const r=e[10];r&&(n=r)}if(!n){for(;e&&!e[4]&&e!==t;)pn(e)&&Md(e[1],e),e=e[3];null===e&&(e=t),pn(e)&&Md(e[1],e),n=e&&e[4]}e=n}}(e)}}function Md(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof Ys)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(i)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+1],a="function"==typeof o?o(e):we(e[o]),l=r[i=n[s+2]],u=n[s+3];"boolean"==typeof u?a.removeEventListener(n[s],l,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),s+=2}else{const o=r[i=n[s+1]];n[s].call(o)}if(null!==r){for(let s=i+1;s<r.length;s++)r[s]();e[7]=null}}(t,e),1===e[1].type&&Ee(e[V])&&e[V].destroy();const n=e[17];if(null!==n&&Qt(e[3])){n!==e[3]&&rv(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function sv(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const i=t.data[r.directiveStart].encapsulation;if(i===Ae.None||i===Ae.Emulated)return null}return Et(r,n)}(t,e.parent,n)}function qr(t,e,n,r,i){Ee(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function av(t,e,n){Ee(t)?t.appendChild(e,n):e.appendChild(n)}function lv(t,e,n,r,i){null!==r?qr(t,e,n,r,i):av(t,e,n)}function vl(t,e){return Ee(t)?t.parentNode(e):e.parentNode}let dv=function(t,e,n){return 40&t.type?Et(t,n):null};function El(t,e,n,r){const i=sv(t,r,e),s=e[V],a=function(t,e,n){return dv(t,e,n)}(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let l=0;l<n.length;l++)lv(s,i,n[l],a,!1);else lv(s,i,n,a,!1)}function Cl(t,e){if(null!==e){const n=e.type;if(3&n)return Et(e,t);if(4&n)return kd(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return Cl(t,r);{const i=t[e.index];return Qt(i)?kd(-1,i):we(i)}}if(32&n)return Td(e,t)()||we(t[e.index]);{const r=hv(t,e);return null!==r?Array.isArray(r)?r[0]:Cl(uo(t[16]),r):Cl(t,e.next)}}return null}function hv(t,e){return null!==e?t[16][6].projection[e.projection]:null}function kd(t,e){const n=10+t+1;if(n<e.length){const r=e[n],i=r[1].firstChild;if(null!==i)return Cl(r,i)}return e[7]}function Fd(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],l=n.type;if(o&&0===e&&(a&&ze(we(a),r),n.flags|=4),64!=(64&n.flags))if(8&l)Fd(t,e,n.child,r,i,s,!1),Hi(e,t,i,a,s);else if(32&l){const u=Td(n,r);let c;for(;c=u();)Hi(e,t,i,c,s);Hi(e,t,i,a,s)}else 16&l?pv(t,e,r,n,i,s):Hi(e,t,i,a,s);n=o?n.projectionNext:n.next}}function co(t,e,n,r,i,s){Fd(n,r,t.firstChild,e,i,s,!1)}function pv(t,e,n,r,i,s){const o=n[16],l=o[6].projection[r.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++)Hi(e,t,i,l[u],s);else Fd(t,e,l,o[3],i,s,!0)}function gv(t,e,n){Ee(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Ld(t,e,n){Ee(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function wl(t){return t.ngOriginalError}function iP(t,...e){t.error(...e)}class Kr{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e),r=this._findContext(e),i=function(t){return t&&t.ngErrorLogger||iP}(e);i(this._console,"ERROR",e),n&&i(this._console,"ORIGINAL ERROR",n),r&&i(this._console,"ERROR CONTEXT",r)}_findContext(e){return e?function(t){return t.ngDebugContext}(e)||this._findContext(wl(e)):null}_findOriginalError(e){let n=e&&wl(e);for(;n&&wl(n);)n=wl(n);return n||null}}const Ov=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(J))();function Cn(t){return t instanceof Function?t():t}function Lv(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}const Vv="ng-template";function fP(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Lv(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Bv(t){return 4===t.type&&t.value!==Vv}function hP(t,e,n){return e===(4!==t.type||n?t.value:Vv)}function pP(t,e,n){let r=4;const i=t.attrs||[],s=function(t){for(let e=0;e<t.length;e++)if(Ty(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!hP(t,l,n)||""===l&&1===e.length){if(Yt(r))return!1;o=!0}}else{const u=8&r?l:e[++a];if(8&r&&null!==t.attrs){if(!fP(t.attrs,u,n)){if(Yt(r))return!1;o=!0}continue}const d=gP(8&r?"class":l,i,Bv(t),n);if(-1===d){if(Yt(r))return!1;o=!0;continue}if(""!==u){let f;f=d>s?"":i[d+1].toLowerCase();const h=8&r?f:null;if(h&&-1!==Lv(h,u,0)||2&r&&u!==f){if(Yt(r))return!1;o=!0}}}}else{if(!o&&!Yt(r)&&!Yt(l))return!1;if(o&&Yt(l))continue;o=!1,r=l|1&r}}return Yt(r)||o}function Yt(t){return 0==(1&t)}function gP(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){const o=e[i];if(o===t)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Uv(t,e,n=!1){for(let r=0;r<e.length;r++)if(pP(t,e[r],n))return!0;return!1}function jv(t,e){return t?":not("+e.trim()+")":e}function EP(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Yt(o)&&(e+=jv(s,i),i=""),r=o,s=s||!Yt(r);n++}return""!==i&&(e+=jv(s,i)),e}const x={};function In(t){Hv(Q(),E(),nt()+t,el())}function Hv(t,e,n,r){if(!r)if(3==(3&e[2])){const s=t.preOrderCheckHooks;null!==s&&sl(e,s,n)}else{const s=t.preOrderHooks;null!==s&&ol(e,s,0,n)}cr(n)}function Zv(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const o=t.data[s];od(i),o.contentQueries(2,e[s],s)}}}function go(t,e,n,r,i,s,o,a,l,u){const c=e.blueprint.slice();return c[0]=i,c[2]=140|r,hy(c),c[3]=c[15]=t,c[8]=n,c[10]=o||t&&t[10],c[V]=a||t&&t[V],c[12]=l||t&&t[12]||null,c[9]=u||t&&t[9]||null,c[6]=s,c[16]=2==e.type?t[16]:c,c}function Wi(t,e,n,r,i){let s=t.data[e];if(null===s)s=function(t,e,n,r,i){const s=_y(),o=nd(),l=t.data[e]=function(t,e,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(t,e,n,r,i),P.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function(){const t=P.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return gn(s,!0),s}function Gi(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function _o(t,e,n){nl(e);try{const r=t.viewQuery;null!==r&&cf(1,r,n);const i=t.template;null!==i&&Xv(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Zv(t,e),t.staticViewQueries&&cf(2,t.viewQuery,n);const s=t.components;null!==s&&function(t,e){for(let n=0;n<e.length;n++)XP(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[2]&=-5,rl()}}function qi(t,e,n,r){const i=e[2];if(256==(256&i))return;nl(e);const s=el();try{hy(e),function(t){P.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&Xv(t,e,n,2,r);const o=3==(3&i);if(!s)if(o){const u=t.preOrderCheckHooks;null!==u&&sl(e,u,null)}else{const u=t.preOrderHooks;null!==u&&ol(e,u,0,null),ad(e,0)}if(function(t){for(let e=Sd(t);null!==e;e=Ad(e)){if(!e[2])continue;const n=e[9];for(let r=0;r<n.length;r++){const i=n[r],s=i[3];0==(1024&i[2])&&td(s,1),i[2]|=1024}}}(e),function(t){for(let e=Sd(t);null!==e;e=Ad(e))for(let n=10;n<e.length;n++){const r=e[n],i=r[1];ed(r)&&qi(i,r,i.template,r[8])}}(e),null!==t.contentQueries&&Zv(t,e),!s)if(o){const u=t.contentCheckHooks;null!==u&&sl(e,u)}else{const u=t.contentHooks;null!==u&&ol(e,u,1),ad(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)cr(~i);else{const s=i,o=n[++r],a=n[++r];aN(o,s),a(2,e[s])}}}finally{cr(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)ZP(t,e[n])}(e,a);const l=t.viewQuery;if(null!==l&&cf(2,l,r),!s)if(o){const u=t.viewCheckHooks;null!==u&&sl(e,u)}else{const u=t.viewHooks;null!==u&&ol(e,u,2),ad(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,td(e[3],-1))}finally{rl()}}function xP(t,e,n,r){const i=e[10],s=!el(),o=function(t){return 4==(4&t[2])}(e);try{s&&!o&&i.begin&&i.begin(),o&&_o(t,e,r),qi(t,e,n,r)}finally{s&&!o&&i.end&&i.end()}}function Xv(t,e,n,r,i){const s=nt(),o=2&r;try{cr(-1),o&&e.length>20&&Hv(t,e,20,el()),n(r,i)}finally{cr(s)}}function tf(t,e,n){!py()||(function(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;t.firstCreatePass||Zs(n,e),ze(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const l=t.data[a],u=Kt(l);u&&zP(e,n,l);const c=Xs(e,t,a,n);ze(c,e),null!==o&&QP(0,a-i,c,l,0,o),u&&(Ct(n.index,e)[8]=c)}}(t,e,n,Et(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,a=P.lFrame.currentDirectiveIndex;try{cr(o);for(let l=r;l<i;l++){const u=t.data[l],c=e[l];id(l),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&lE(u,c)}}finally{cr(-1),id(a)}}(t,e,n))}function nf(t,e,n=Et){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function tE(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Nl(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Nl(t,e,n,r,i,s,o,a,l,u){const c=20+r,d=c+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:x);return n}(c,d),h="function"==typeof u?u():u;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,c),bindingStartIndex:c,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:h,incompleteFirstPass:!1}}function sE(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function rf(t,e,n,r){let i=!1;if(py()){const s=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];Uv(n,o.selectors,!1)&&(i||(i=[]),dl(Zs(n,e),t,o.type),Kt(o)?(uE(t,n),i.unshift(o)):i.push(o))}return i}(t,e,n),o=null===r?null:{"":-1};if(null!==s){i=!0,cE(n,t.data.length,s.length);for(let c=0;c<s.length;c++){const d=s[c];d.providersResolver&&d.providersResolver(d)}let a=!1,l=!1,u=Gi(t,e,s.length,null);for(let c=0;c<s.length;c++){const d=s[c];n.mergedAttrs=ll(n.mergedAttrs,d.hostAttrs),dE(t,n,e,u,d),qP(u,d,o),null!==d.contentQueries&&(n.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(n.flags|=128);const f=d.type.prototype;!a&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),a=!0),!l&&(f.ngOnChanges||f.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),l=!0),u++}!function(t,e){const r=e.directiveEnd,i=t.data,s=e.attrs,o=[];let a=null,l=null;for(let u=e.directiveStart;u<r;u++){const c=i[u],d=c.inputs,f=null===s||Bv(e)?null:KP(d,s);o.push(f),a=sE(d,u,a),l=sE(c.outputs,u,l)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=l}(t,n)}o&&function(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const s=n[e[i+1]];if(null==s)throw new sr("301",`Export of name '${e[i+1]}' not found!`);r.push(e[i],s)}}}(n,r,o)}return n.mergedAttrs=ll(n.mergedAttrs,n.attrs),i}function aE(t,e,n,r,i,s){const o=s.hostBindings;if(o){let a=t.hostBindingOpCodes;null===a&&(a=t.hostBindingOpCodes=[]);const l=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(a)!=l&&a.push(l),a.push(r,i,o)}}function lE(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function uE(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function qP(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Kt(e)&&(n[""]=t)}}function cE(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function dE(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=jr(i.type)),o=new Ys(s,Kt(i),null);t.blueprint[r]=o,n[r]=o,aE(t,e,0,r,Gi(t,n,i.hostVars,x),i)}function zP(t,e,n){const r=Et(e,t),i=tE(n),s=t[10],o=Rl(t,go(t,i,null,n.onPush?64:16,r,e,s,s.createRenderer(r,n),null,null));t[e.index]=o}function QP(t,e,n,r,i,s){const o=s[e];if(null!==o){const a=r.setInput;for(let l=0;l<o.length;){const u=o[l++],c=o[l++],d=o[l++];null!==a?r.setInput(n,d,u,c):n[c]=d}}}function KP(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function fE(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function ZP(t,e){const n=Ct(e,t);if(ed(n)){const r=n[1];80&n[2]?qi(r,n,r.template,n[8]):n[5]>0&&of(n)}}function of(t){for(let r=Sd(t);null!==r;r=Ad(r))for(let i=10;i<r.length;i++){const s=r[i];if(1024&s[2]){const o=s[1];qi(o,s,o.template,s[8])}else s[5]>0&&of(s)}const n=t[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=Ct(n[r],t);ed(i)&&i[5]>0&&of(i)}}function XP(t,e){const n=Ct(e,t),r=n[1];(function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])})(r,n),_o(r,n,n[8])}function Rl(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function af(t){for(;t;){t[2]|=64;const e=uo(t);if(HA(t)&&!e)return t;t=e}return null}function uf(t,e,n){const r=e[10];r.begin&&r.begin();try{qi(t,e,t.template,n)}catch(i){throw mE(e,i),i}finally{r.end&&r.end()}}function hE(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=bd(n),i=r[1];xP(i,r,i.template,n)}}(t[8])}function cf(t,e,n){od(0),e(t,n)}const iM=(()=>Promise.resolve(null))();function pE(t){return t[7]||(t[7]=[])}function gE(t){return t.cleanup||(t.cleanup=[])}function mE(t,e){const n=t[9],r=n?n.get(Kr,null):null;r&&r.handleError(e)}function yE(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],l=e[o],u=t.data[o];null!==u.setInput?u.setInput(l,i,r,a):l[a]=i}}function $n(t,e,n){const r=function(t,e){return we(e[t])}(e,t);!function(t,e,n){Ee(t)?t.setValue(e,n):e.textContent=n}(t[V],r,n)}function Pl(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Vc(i,a):2==s&&(r=Vc(r,a+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const zi=new re("INJECTOR",-1);class vE{get(e,n=ro){if(n===ro){const r=new Error(`NullInjectorError: No provider for ${U(e)}!`);throw r.name="NullInjectorError",r}return n}}const mo=new re("Set Injector scope."),yo={},aM={};let df;function EE(){return void 0===df&&(df=new vE),df}function CE(t,e=null,n=null,r){return new uM(t,n,e||EE(),r)}class uM{constructor(e,n,r,i=null){this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];n&&mn(n,a=>this.processProvider(a,e,n)),mn([e],a=>this.processInjectorType(a,[],s)),this.records.set(zi,Qi(void 0,this));const o=this.records.get(mo);this.scope=null!=o?o.value:null,this.source=i||("object"==typeof e?null:U(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,n=ro,r=N.Default){this.assertNotDestroyed();const i=Ui(this),s=or(void 0);try{if(!(r&N.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function(t){return"function"==typeof t||"object"==typeof t&&t instanceof re}(e)&&Vn(e);a=l&&this.injectableDefInScope(l)?Qi(ff(e),yo):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&N.Self?EE():this.parent).get(e,n=r&N.Optional&&n===ro?null:n)}catch(o){if("NullInjectorError"===o.name){if((o[Bi]=o[Bi]||[]).unshift(U(e)),i)throw o;return Hy(o,e,"R3InjectorError",this.source)}throw o}finally{or(s),Ui(i)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((r,i)=>e.push(U(i))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,n,r){if(!(e=S(e)))return!1;let i=Ym(e);const s=null==i&&e.ngModule||void 0,o=void 0===s?e:s,a=-1!==r.indexOf(o);if(void 0!==s&&(i=Ym(s)),null==i)return!1;if(null!=i.imports&&!a){let c;r.push(o);try{mn(i.imports,d=>{this.processInjectorType(d,n,r)&&(void 0===c&&(c=[]),c.push(d))})}finally{}if(void 0!==c)for(let d=0;d<c.length;d++){const{ngModule:f,providers:h}=c[d];mn(h,p=>this.processProvider(p,f,h||ne))}}this.injectorDefTypes.add(o);const l=jr(o)||(()=>new o);this.records.set(o,Qi(l,yo));const u=i.providers;if(null!=u&&!a){const c=e;mn(u,d=>this.processProvider(d,c,u))}return void 0!==s&&void 0!==e.providers}processProvider(e,n,r){let i=Ki(e=S(e))?e:S(e&&e.provide);const s=function(t,e,n){return DE(t)?Qi(void 0,t.useValue):Qi(function(t,e,n){let r;if(Ki(t)){const i=S(t);return jr(i)||ff(i)}if(DE(t))r=()=>S(t.useValue);else if(function(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...Wr(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>q(S(t.useExisting));else{const i=S(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return jr(i)||ff(i);r=()=>new i(...Wr(t.deps))}return r}(t),yo)}(e);if(Ki(e)||!0!==e.multi)this.records.get(i);else{let o=this.records.get(i);o||(o=Qi(void 0,yo,!0),o.factory=()=>Wr(o.multi),this.records.set(i,o)),i=e,o.multi.push(e)}this.records.set(i,s)}hydrate(e,n){return n.value===yo&&(n.value=aM,n.value=n.factory()),"object"==typeof n.value&&n.value&&function(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this.onDestroy.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=S(e.providedIn);return"string"==typeof n?"any"===n||n===this.scope:this.injectorDefTypes.has(n)}}function ff(t){const e=Vn(t),n=null!==e?e.factory:jr(t);if(null!==n)return n;if(t instanceof re)throw new Error(`Token ${U(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const r=function(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?");throw new Error(`Can't resolve all parameters for ${U(t)}: (${r.join(", ")}).`)}const n=function(t){const e=t&&(t[Ga]||t[Jm]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function Qi(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function DE(t){return null!==t&&"object"==typeof t&&Cd in t}function Ki(t){return"function"==typeof t}const bE=function(t,e,n){return function(t,e=null,n=null,r){const i=CE(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let fe=(()=>{class t{static create(n,r){return Array.isArray(n)?bE(n,r,""):bE(n.providers,n.parent,n.name||"")}}return t.THROW_IF_NOT_FOUND=ro,t.NULL=new vE,t.\u0275prov=te({token:t,providedIn:"any",factory:()=>q(zi)}),t.__NG_ELEMENT_ID__=-1,t})();function RM(t,e){il(bd(t)[1],Ne())}let Ml=null;function Yi(){if(!Ml){const t=J.Symbol;if(t&&t.iterator)Ml=t.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<e.length;++n){const r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Ml=r)}}}return Ml}function Eo(t){return!!vf(t)&&(Array.isArray(t)||!(t instanceof Map)&&Yi()in t)}function vf(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function bn(t,e,n){return t[e]=n}function Qe(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Ef(t,e,n,r,i,s,o,a){const l=E(),u=Q(),c=t+20,d=u.firstCreatePass?function(t,e,n,r,i,s,o,a,l){const u=e.consts,c=Wi(e,t,4,o||null,ur(u,a));rf(e,n,c,ur(u,l)),il(e,c);const d=c.tViews=Nl(2,c,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u);return null!==e.queries&&(e.queries.template(e,c),d.queries=e.queries.embeddedTView(c)),c}(c,u,l,e,n,r,i,s,o):u.data[c];gn(d,!1);const f=l[V].createComment("");El(u,l,f,d),ze(f,l),Rl(l,l[c]=fE(f,l,f,d)),Ja(d)&&tf(u,l,d),null!=o&&nf(l,d,a)}function z(t,e=N.Default){const n=E();return null===n?q(t,e):xy(Ne(),n,S(t),e)}function Jr(t,e,n){const r=E();return Qe(r,Pi(),e)&&function(t,e,n,r,i,s,o,a){const l=Et(e,n);let c,u=e.inputs;!a&&null!=u&&(c=u[r])?(yE(t,n,c,r,i),Ya(e)&&function(t,e){const n=Ct(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=o?o(i,e.value||"",r):i,Ee(s)?s.setProperty(l,r,i):ud(r)||(l.setProperty?l.setProperty(r,i):l[r]=i))}(Q(),function(){const t=P.lFrame;return Xc(t.tView,t.selectedIndex)}(),r,t,e,r[V],n,!1),Jr}function wf(t,e,n,r,i){const o=i?"class":"style";yE(t,n,e.inputs[o],o,r)}function Tt(t,e,n,r){const i=E(),s=Q(),o=20+t,a=i[V],l=i[o]=Rd(a,e,P.lFrame.currentNamespace),u=s.firstCreatePass?function(t,e,n,r,i,s,o){const a=e.consts,u=Wi(e,t,2,i,ur(a,s));return rf(e,n,u,ur(a,o)),null!==u.attrs&&Pl(u,u.attrs,!1),null!==u.mergedAttrs&&Pl(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,0,e,n,r):s.data[o];gn(u,!0);const c=u.mergedAttrs;null!==c&&al(a,l,c);const d=u.classes;null!==d&&Ld(a,l,d);const f=u.styles;null!==f&&gv(a,l,f),64!=(64&u.flags)&&El(s,i,l,u),0===P.lFrame.elementDepthCount&&ze(l,i),P.lFrame.elementDepthCount++,Ja(u)&&(tf(s,i,u),function(t,e,n){if(Qc(e)){const i=e.directiveEnd;for(let s=e.directiveStart;s<i;s++){const o=t.data[s];o.contentQueries&&o.contentQueries(1,n[s],s)}}}(s,u,i)),null!==r&&nf(i,u)}function St(){let t=Ne();nd()?P.lFrame.isParent=!1:(t=t.parent,gn(t,!1));const e=t;P.lFrame.elementDepthCount--;const n=Q();n.firstCreatePass&&(il(n,t),Qc(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&wf(n,e,E(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&wf(n,e,E(),e.stylesWithoutHost,!1)}function Tf(t){return!!t&&"function"==typeof t.then}const pC=function(t){return!!t&&"function"==typeof t.subscribe};function Ol(t,e,n,r){const i=E(),s=Q(),o=Ne();return function(t,e,n,r,i,s,o,a){const l=Ja(r),c=t.firstCreatePass&&gE(t),d=e[8],f=pE(e);let h=!0;if(3&r.type||a){const g=Et(r,e),v=a?a(g):g,m=f.length,w=a?T=>a(we(T[r.index])):r.index;if(Ee(n)){let T=null;if(!a&&l&&(T=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===n&&i[s+1]===r){const a=e[7],l=i[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(t,e,i,r.index)),null!==T)(T.__ngLastListenerFn__||T).__ngNextListenerFn__=s,T.__ngLastListenerFn__=s,h=!1;else{s=Sf(r,e,d,s,!1);const L=n.listen(v,i,s);f.push(s,L),c&&c.push(i,w,m,m+1)}}else s=Sf(r,e,d,s,!0),v.addEventListener(i,s,o),f.push(s),c&&c.push(i,w,m,o)}else s=Sf(r,e,d,s,!1);const p=r.outputs;let _;if(h&&null!==p&&(_=p[i])){const g=_.length;if(g)for(let v=0;v<g;v+=2){const ye=e[_[v]][_[v+1]].subscribe(s),ut=f.length;f.push(s,ye),c&&c.push(i,r.index,ut,-(ut+1))}}}(s,i,i[V],o,t,e,!!n,r),Ol}function mC(t,e,n,r){try{return!1!==n(r)}catch(i){return mE(t,i),!1}}function Sf(t,e,n,r,i){return function s(o){if(o===Function)return r;const a=2&t.flags?Ct(t.index,e):e;0==(32&e[2])&&af(a);let l=mC(e,0,r,o),u=s.__ngNextListenerFn__;for(;u;)l=mC(e,0,u,o)&&l,u=u.__ngNextListenerFn__;return i&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function Fl(t=1){return function(t){return(P.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,P.lFrame.contextLView))[8]}(t)}function Zr(t,e=""){const n=E(),r=Q(),i=t+20,s=r.firstCreatePass?Wi(r,i,1,e,null):r.data[i],o=n[i]=function(t,e){return Ee(t)?t.createText(e):t.createTextNode(e)}(n[V],e);El(r,n,o,s),gn(s,!1)}function Rf(t){return Xr("",t,""),Rf}function Xr(t,e,n){const r=E(),i=function(t,e,n,r){return Qe(t,Pi(),n)?e+O(n)+r:x}(r,t,e,n);return i!==x&&$n(r,nt(),i),Xr}const ei=void 0;var rk=["en",[["a","p"],["AM","PM"],ei],[["AM","PM"],ei,ei],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ei,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ei,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ei,"{1} 'at' {0}",ei],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){const e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let ls={};function lI(t){return t in ls||(ls[t]=J.ng&&J.ng.common&&J.ng.common.locales&&J.ng.common.locales[t]),ls[t]}var b=(()=>((b=b||{})[b.LocaleId=0]="LocaleId",b[b.DayPeriodsFormat=1]="DayPeriodsFormat",b[b.DayPeriodsStandalone=2]="DayPeriodsStandalone",b[b.DaysFormat=3]="DaysFormat",b[b.DaysStandalone=4]="DaysStandalone",b[b.MonthsFormat=5]="MonthsFormat",b[b.MonthsStandalone=6]="MonthsStandalone",b[b.Eras=7]="Eras",b[b.FirstDayOfWeek=8]="FirstDayOfWeek",b[b.WeekendRange=9]="WeekendRange",b[b.DateFormat=10]="DateFormat",b[b.TimeFormat=11]="TimeFormat",b[b.DateTimeFormat=12]="DateTimeFormat",b[b.NumberSymbols=13]="NumberSymbols",b[b.NumberFormats=14]="NumberFormats",b[b.CurrencyCode=15]="CurrencyCode",b[b.CurrencySymbol=16]="CurrencySymbol",b[b.CurrencyName=17]="CurrencyName",b[b.Currencies=18]="Currencies",b[b.Directionality=19]="Directionality",b[b.PluralCase=20]="PluralCase",b[b.ExtraData=21]="ExtraData",b))();const Vl="en-US";let uI=Vl;function Pf(t){yt(t,"Expected localeId to be defined"),"string"==typeof t&&(uI=t.toLowerCase().replace(/_/g,"-"))}class kI{}const FI="ngComponent";class iO{resolveComponentFactory(e){throw function(t){const e=Error(`No component factory found for ${U(t)}. Did you add it to @NgModule.entryComponents?`);return e[FI]=t,e}(e)}}let cs=(()=>{class t{}return t.NULL=new iO,t})();function $l(...t){}function ds(t,e){return new nn(Et(t,e))}const aO=function(){return ds(Ne(),E())};let nn=(()=>{class t{constructor(n){this.nativeElement=n}}return t.__NG_ELEMENT_ID__=aO,t})();class Wl{}let VI=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>uO(),t})();const uO=function(){const t=E(),n=Ct(Ne().index,t);return function(t){return t[V]}(pn(n)?n:t)};let Bf=(()=>{class t{}return t.\u0275prov=te({token:t,providedIn:"root",factory:()=>null}),t})();class Uf{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const BI=new Uf("12.2.17");class UI{constructor(){}supports(e){return Eo(e)}create(e){return new hO(e)}}const fO=(t,e)=>e;class hO{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||fO}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){const o=!r||n&&n.currentIndex<HI(r,i,s)?n:r,a=HI(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,null==o.previousIndex)i++;else{s||(s=[]);const u=a-i,c=l-i;if(u!=c){for(let f=0;f<u;f++){const h=f<s.length?s[f]:s[f]=0,p=h+f;c<=p&&p<u&&(s[f]=h+1)}s[o.previousIndex]=c-u}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!Eo(e))throw new Error(`Error trying to diff '${U(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),r=!0),n=n._next}else i=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Yi()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new pO(n,r),s,i),e}_verifyReinsertion(e,n,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new jI),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new jI),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class pO{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class gO{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class jI{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new gO,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function HI(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class $I{constructor(){}supports(e){return e instanceof Map||vf(e)}create(){return new _O}}class _O{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let n;for(n=this._mapHead;null!==n;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}diff(e){if(e){if(!(e instanceof Map||vf(e)))throw new Error(`Error trying to diff '${U(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{const s=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,s)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){const r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,n);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new mO(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}}class mO{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function WI(){return new So([new UI])}let So=(()=>{class t{constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||WI()),deps:[[t,new Gr,new yn]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new Error(`Cannot find a differ supporting object '${n}' of type '${function(t){return t.name||typeof t}(n)}'`)}}return t.\u0275prov=te({token:t,providedIn:"root",factory:WI}),t})();function GI(){return new fs([new $I])}let fs=(()=>{class t{constructor(n){this.factories=n}static create(n,r){if(r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||GI()),deps:[[t,new Gr,new yn]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(r)return r;throw new Error(`Cannot find a differ supporting object '${n}'`)}}return t.\u0275prov=te({token:t,providedIn:"root",factory:GI}),t})();function Gl(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];if(null!==s&&r.push(we(s)),Qt(s))for(let a=10;a<s.length;a++){const l=s[a],u=l[1].firstChild;null!==u&&Gl(l[1],l,u,r)}const o=n.type;if(8&o)Gl(t,e,n.child,r);else if(32&o){const a=Td(n,e);let l;for(;l=a();)r.push(l)}else if(16&o){const a=hv(e,n);if(Array.isArray(a))r.push(...a);else{const l=uo(e[16]);Gl(l[1],l,a,r,!0)}}n=i?n.projectionNext:n.next}return r}class Ao{constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,n=e[1];return Gl(n,e,n.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Qt(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(Pd(e,r),$r(n,r))}this._attachedToViewContainer=!1}iv(this._lView[1],this._lView)}onDestroy(e){!function(t,e,n,r){const i=pE(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&gE(t).push(r,i.length-1))}(this._lView[1],this._lView,null,e)}markForCheck(){af(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){uf(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){tl(!0);try{uf(t,e,n)}finally{tl(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function(t,e){co(t,e,e[V],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class vO extends Ao{constructor(e){super(e),this._view=e}detectChanges(){hE(this._view)}checkNoChanges(){!function(t){tl(!0);try{hE(t)}finally{tl(!1)}}(this._view)}get context(){return null}}const wO=[new $I],SO=new So([new UI]),AO=new fs(wO),RO=function(){return function(t,e){return 4&t.type?new MO(e,t,ds(t,e)):null}(Ne(),E())};let Gn=(()=>{class t{}return t.__NG_ELEMENT_ID__=RO,t})();const PO=Gn,MO=class extends PO{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}createEmbeddedView(e){const n=this._declarationTContainer.tViews,r=go(this._declarationLView,n,e,16,null,n.declTNode,null,null,null,null);r[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(r[19]=s.createEmbeddedView(n)),_o(n,r,e),new Ao(r)}};class ti{}const FO=function(){return function(t,e){let n;const r=e[t.index];if(Qt(r))n=r;else{let i;if(8&t.type)i=we(r);else{const s=e[V];i=s.createComment("");const o=Et(t,e);qr(s,vl(s,o),i,function(t,e){return Ee(t)?t.nextSibling(e):e.nextSibling}(s,o),!1)}e[t.index]=n=fE(r,e,i,t),Rl(e,n)}return new qI(n,t,e)}(Ne(),E())};let Sn=(()=>{class t{}return t.__NG_ELEMENT_ID__=FO,t})();const VO=Sn,qI=class extends VO{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return ds(this._hostTNode,this._hostLView)}get injector(){return new ki(this._hostTNode,this._hostLView)}get parentInjector(){const e=cl(this._hostTNode,this._hostLView);if(Ay(e)){const n=xi(e,this._hostLView),r=Mi(e);return new ki(n[1].data[r+8],n)}return new ki(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=zI(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,n,r){const i=e.createEmbeddedView(n||{});return this.insert(i,r),i}createComponent(e,n,r,i,s){const o=r||this.parentInjector;if(!s&&null==e.ngModule&&o){const l=o.get(ti,null);l&&(s=l)}const a=e.create(o,i,void 0,s);return this.insert(a.hostView,n),a}insert(e,n){const r=e._lView,i=r[1];if(function(t){return Qt(t[3])}(r)){const c=this.indexOf(e);if(-1!==c)this.detach(c);else{const d=r[3],f=new qI(d,d[6],d[3]);f.detach(f.indexOf(e))}}const s=this._adjustIndex(n),o=this._lContainer;!function(t,e,n,r){const i=10+r,s=n.length;r>0&&(n[i-1][4]=e),r<s-10?(e[4]=n[i],pl(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const o=e[17];null!==o&&n!==o&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(i,r,o,s);const a=kd(s,o),l=r[V],u=vl(l,o[7]);return null!==u&&function(t,e,n,r,i,s){r[0]=i,r[6]=e,co(t,r,n,1,i,s)}(i,o[6],l,r,u,a),e.attachToViewContainerRef(),pl(jf(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=zI(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=Pd(this._lContainer,n);r&&($r(jf(this._lContainer),n),iv(r[1],r))}detach(e){const n=this._adjustIndex(e,-1),r=Pd(this._lContainer,n);return r&&null!=$r(jf(this._lContainer),n)?new Ao(r):null}_adjustIndex(e,n=0){return null==e?this.length+n:e}};function zI(t){return t[8]}function jf(t){return t[8]||(t[8]=[])}const _s={};class pD extends cs{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=Ge(e);return new _D(n,this.ngModule)}}function gD(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const k1=new re("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Ov});class _D extends kI{constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function(t){return t.map(EP).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return gD(this.componentDef.inputs)}get outputs(){return gD(this.componentDef.outputs)}create(e,n,r,i){const s=(i=i||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const s=t.get(n,_s,i);return s!==_s||r===_s?s:e.get(n,r,i)}}}(e,i.injector):e,o=s.get(Wl,dy),a=s.get(Bf,null),l=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=r?function(t,e,n){if(Ee(t))return t.selectRootElement(e,n===Ae.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(l,r,this.componentDef.encapsulation):Rd(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),d=this.componentDef.onPush?576:528,f=function(t,e){return{components:[],scheduler:t||Ov,clean:iM,playerHandler:e||null,flags:0}}(),h=Nl(0,null,null,1,0,null,null,null,null,null),p=go(null,h,f,d,null,null,o,l,a,s);let _,g;nl(p);try{const v=function(t,e,n,r,i,s){const o=n[1];n[20]=t;const l=Wi(o,20,2,"#host",null),u=l.mergedAttrs=e.hostAttrs;null!==u&&(Pl(l,u,!0),null!==t&&(al(i,t,u),null!==l.classes&&Ld(i,t,l.classes),null!==l.styles&&gv(i,t,l.styles)));const c=r.createRenderer(t,e),d=go(n,tE(e),null,e.onPush?64:16,n[20],l,r,c,s||null,null);return o.firstCreatePass&&(dl(Zs(l,n),o,e.type),uE(o,l),cE(l,n.length,1)),Rl(n,d),n[20]=d}(c,this.componentDef,p,o,l);if(c)if(r)al(l,c,["ng-version",BI.full]);else{const{attrs:m,classes:w}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!Yt(i))break;i=s}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);m&&al(l,c,m),w&&w.length>0&&Ld(l,c,w.join(" "))}if(g=Xc(h,20),void 0!==n){const m=g.projection=[];for(let w=0;w<this.ngContentSelectors.length;w++){const T=n[w];m.push(null!=T?Array.from(T):null)}}_=function(t,e,n,r,i){const s=n[1],o=function(t,e,n){const r=Ne();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),dE(t,r,e,Gi(t,e,1,null),n));const i=Xs(e,t,r.directiveStart,r);ze(i,e);const s=Et(r,e);return s&&ze(s,e),i}(s,n,e);if(r.components.push(o),t[8]=o,i&&i.forEach(l=>l(o,e)),e.contentQueries){const l=Ne();e.contentQueries(1,o,l.directiveStart)}const a=Ne();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(cr(a.index),aE(n[1],a,0,a.directiveStart,a.directiveEnd,e),lE(e,o)),o}(v,this.componentDef,p,f,[RM]),_o(h,p,null)}finally{rl()}return new L1(this.componentType,_,ds(g,p),p,g)}}class L1 extends class{}{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=n,this.hostView=this.changeDetectorRef=new vO(i),this.componentType=e}get injector(){return new ki(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}const ms=new Map;class U1 extends ti{constructor(e,n){super(),this._parent=n,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new pD(this);const r=Mt(e),i=function(t){return t[kA]||null}(e);i&&Pf(i),this._bootstrapComponents=Cn(r.bootstrap),this._r3Injector=CE(e,n,[{provide:ti,useValue:this},{provide:cs,useValue:this.componentFactoryResolver}],U(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,n=fe.THROW_IF_NOT_FOUND,r=N.Default){return e===fe||e===ti||e===zi?this:this._r3Injector.get(e,n,r)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class eh extends class{}{constructor(e){super(),this.moduleType=e,null!==Mt(e)&&function(t){const e=new Set;!function n(r){const i=Mt(r,!0),s=i.id;null!==s&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${U(e)} vs ${U(e.name)}`)}(s,ms.get(s),r),ms.set(s,r));const o=Cn(i.imports);for(const a of o)e.has(a)||(e.add(a),n(a))}(t)}(e)}create(e){return new U1(this.moduleType,e)}}function th(t,e,n,r){return function(t,e,n,r,i,s){const o=e+n;return Qe(t,o,i)?bn(t,o+1,s?r.call(s,i):r(i)):Fo(t,o+1)}(E(),tt(),t,e,n,r)}function vD(t,e,n,r,i){return function(t,e,n,r,i,s,o){const a=e+n;return function(t,e,n,r){const i=Qe(t,e,n);return Qe(t,e+1,r)||i}(t,a,i,s)?bn(t,a+2,o?r.call(o,i,s):r(i,s)):Fo(t,a+2)}(E(),tt(),t,e,n,r,i)}function Fo(t,e){const n=t[e];return n===x?void 0:n}function nh(t){return e=>{setTimeout(t,void 0,e)}}const qn=class extends Fc{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){var i,s,o;let a=e,l=n||(()=>null),u=r;if(e&&"object"==typeof e){const d=e;a=null===(i=d.next)||void 0===i?void 0:i.bind(d),l=null===(s=d.error)||void 0===s?void 0:s.bind(d),u=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}this.__isAsync&&(l=nh(l),a&&(a=nh(a)),u&&(u=nh(u)));const c=super.subscribe({next:a,error:l,complete:u});return e instanceof De&&e.add(c),c}};Symbol;const eu=new re("Application Initializer");let vs=(()=>{class t{constructor(n){this.appInits=n,this.resolve=$l,this.reject=$l,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if(Tf(s))n.push(s);else if(pC(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});n.push(o)}}Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return t.\u0275fac=function(n){return new(n||t)(q(eu,8))},t.\u0275prov=te({token:t,factory:t.\u0275fac}),t})();const Uo=new re("AppId"),$F={provide:Uo,useFactory:function(){return`${hh()}${hh()}${hh()}`},deps:[]};function hh(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const zD=new re("Platform Initializer"),ph=new re("Platform ID"),WF=new re("appBootstrapListener");let gh=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=te({token:t,factory:t.\u0275fac}),t})();const _r=new re("LocaleId"),QD=new re("DefaultCurrencyCode");class qF{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}const _h=function(t){return new eh(t)},zF=_h,QF=function(t){return Promise.resolve(_h(t))},KD=function(t){const e=_h(t),r=Cn(Mt(t).declarations).reduce((i,s)=>{const o=Ge(s);return o&&i.push(new _D(o)),i},[]);return new qF(e,r)},KF=KD,YF=function(t){return Promise.resolve(KD(t))};let nu=(()=>{class t{constructor(){this.compileModuleSync=zF,this.compileModuleAsync=QF,this.compileModuleAndAllComponentsSync=KF,this.compileModuleAndAllComponentsAsync=YF}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=te({token:t,factory:t.\u0275fac}),t})();const XF=(()=>Promise.resolve(0))();function mh(t){"undefined"==typeof Zone?XF.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class $e{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new qn(!1),this.onMicrotaskEmpty=new qn(!1),this.onStable=new qn(!1),this.onError=new qn(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function(){let t=J.requestAnimationFrame,e=J.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(J,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,vh(t),t.isCheckStableRunning=!0,yh(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),vh(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return YD(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),JD(t)}},onInvoke:(n,r,i,s,o,a,l)=>{try{return YD(t),n.invoke(i,s,o,a,l)}finally{t.shouldCoalesceRunChangeDetection&&e(),JD(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,vh(t),yh(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!$e.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if($e.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,tL,$l,$l);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const tL={};function yh(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function vh(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function YD(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function JD(t){t._nesting--,yh(t)}class iL{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new qn,this.onMicrotaskEmpty=new qn,this.onStable=new qn,this.onError=new qn}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}let Eh=(()=>{class t{constructor(n){this._ngZone=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{$e.assertNotInAngularZone(),mh(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())mh(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(n,r,i){return[]}}return t.\u0275fac=function(n){return new(n||t)(q($e))},t.\u0275prov=te({token:t,factory:t.\u0275fac}),t})(),ZD=(()=>{class t{constructor(){this._applications=new Map,Ch.addToWindow(this)}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return Ch.findTestabilityInTree(this,n,r)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=te({token:t,factory:t.\u0275fac}),t})();class sL{addToWindow(e){}findTestabilityInTree(e,n,r){return null}}let Ch=new sL,XD=!0,eb=!1;let on;const nb=new re("AllowMultipleToken");function rb(t,e,n=[]){const r=`Platform: ${e}`,i=new re(r);return(s=[])=>{let o=ib();if(!o||o.injector.get(nb,!1))if(t)t(n.concat(s).concat({provide:i,useValue:!0}));else{const a=n.concat(s).concat({provide:i,useValue:!0},{provide:mo,useValue:"platform"});!function(t){if(on&&!on.destroyed&&!on.injector.get(nb,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");on=t.get(sb);const e=t.get(zD,null);e&&e.forEach(n=>n())}(fe.create({providers:a,name:r}))}return function(t){const e=ib();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function ib(){return on&&!on.destroyed?on:null}let sb=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const a=function(t,e){let n;return n="noop"===t?new iL:("zone.js"===t?void 0:t)||new $e({enableLongStackTrace:(eb=!0,XD),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(r?r.ngZone:void 0,{ngZoneEventCoalescing:r&&r.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:r&&r.ngZoneRunCoalescing||!1}),l=[{provide:$e,useValue:a}];return a.run(()=>{const u=fe.create({providers:l,parent:this.injector,name:n.moduleType.name}),c=n.create(u),d=c.injector.get(Kr,null);if(!d)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return a.runOutsideAngular(()=>{const f=a.onError.subscribe({next:h=>{d.handleError(h)}});c.onDestroy(()=>{Ih(this._modules,c),f.unsubscribe()})}),function(t,e,n){try{const r=n();return Tf(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(d,a,()=>{const f=c.injector.get(vs);return f.runInitializers(),f.donePromise.then(()=>(Pf(c.injector.get(_r,Vl)||Vl),this._moduleDoBootstrap(c),c))})})}bootstrapModule(n,r=[]){const i=ob({},r);return function(t,e,n){const r=new eh(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(jo);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new Error(`The module ${U(n.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(n){return new(n||t)(q(fe))},t.\u0275prov=te({token:t,factory:t.\u0275fac}),t})();function ob(t,e){return Array.isArray(e)?e.reduce(ob,t):Object.assign(Object.assign({},t),e)}let jo=(()=>{class t{constructor(n,r,i,s,o){this._zone=n,this._injector=r,this._exceptionHandler=i,this._componentFactoryResolver=s,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new ct(u=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{u.next(this._stable),u.complete()})}),l=new ct(u=>{let c;this._zone.runOutsideAngular(()=>{c=this._zone.onStable.subscribe(()=>{$e.assertNotInAngularZone(),mh(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,u.next(!0))})})});const d=this._zone.onUnstable.subscribe(()=>{$e.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{u.next(!1)}))});return()=>{c.unsubscribe(),d.unsubscribe()}});this.isStable=function(...t){let e=Number.POSITIVE_INFINITY,n=null,r=t[t.length-1];return function(t){return t&&"function"==typeof t.schedule}(r)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof r&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof ct?t[0]:function(t=Number.POSITIVE_INFINITY){return qm(Fm,t)}(e)(function(t,e){return e?Gm(t,e):new ct(jm(t))}(t,n))}(a,l.pipe(t=>zm()(function(t,e){return function(r){let i;i="function"==typeof t?t:function(){return t};const s=Object.create(r,gA);return s.source=r,s.subjectFactory=i,s}}(EA)(t))))}bootstrap(n,r){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let i;i=n instanceof kI?n:this._componentFactoryResolver.resolveComponentFactory(n),this.componentTypes.push(i.componentType);const s=function(t){return t.isBoundToModule}(i)?void 0:this._injector.get(ti),a=i.create(fe.NULL,[],r||i.selector,s),l=a.location.nativeElement,u=a.injector.get(Eh,null),c=u&&a.injector.get(ZD);return u&&c&&c.registerApplication(l,u),a.onDestroy(()=>{this.detachView(a.hostView),Ih(this.components,a),c&&c.unregisterApplication(l)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Ih(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(WF,[]).concat(this._bootstrapListeners).forEach(i=>i(n))}ngOnDestroy(){this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(n){return new(n||t)(q($e),q(fe),q(Kr),q(cs),q(vs))},t.\u0275prov=te({token:t,factory:t.\u0275fac}),t})();function Ih(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ML=rb(null,"core",[{provide:ph,useValue:"unknown"},{provide:sb,deps:[fe]},{provide:ZD,deps:[]},{provide:gh,deps:[]}]),LL=[{provide:jo,useClass:jo,deps:[$e,fe,Kr,cs,vs]},{provide:k1,deps:[$e],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(n){e.push(n)}}},{provide:vs,useClass:vs,deps:[[new yn,eu]]},{provide:nu,useClass:nu,deps:[]},$F,{provide:So,useFactory:function(){return SO},deps:[]},{provide:fs,useFactory:function(){return AO},deps:[]},{provide:_r,useFactory:function(t){return Pf(t=t||"undefined"!=typeof $localize&&$localize.locale||Vl),t},deps:[[new oo(_r),new yn,new Gr]]},{provide:QD,useValue:"USD"}];let BL=(()=>{class t{constructor(n){}}return t.\u0275fac=function(n){return new(n||t)(q(jo))},t.\u0275mod=Gs({type:t}),t.\u0275inj=Fr({providers:LL}),t})(),fu=null;function qo(){return fu}const at=new re("DocumentToken");var Te=(()=>((Te=Te||{})[Te.Zero=0]="Zero",Te[Te.One=1]="One",Te[Te.Two=2]="Two",Te[Te.Few=3]="Few",Te[Te.Many=4]="Many",Te[Te.Other=5]="Other",Te))();const zV=function(t){return function(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=lI(e);if(n)return n;const r=e.split("-")[0];if(n=lI(r),n)return n;if("en"===r)return rk;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[b.PluralCase]};class Iu{}let I2=(()=>{class t extends Iu{constructor(n){super(),this.locale=n}getPluralCategory(n,r){switch(zV(r||this.locale)(n)){case Te.Zero:return"zero";case Te.One:return"one";case Te.Two:return"two";case Te.Few:return"few";case Te.Many:return"many";default:return"other"}}}return t.\u0275fac=function(n){return new(n||t)(q(_r))},t.\u0275prov=te({token:t,factory:t.\u0275fac}),t})();class T2{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Wb=(()=>{class t{constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${n}' of type '${function(t){return t.name||typeof t}(n)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=[];n.forEachOperation((i,s,o)=>{if(null==i.previousIndex){const a=this._viewContainer.createEmbeddedView(this._template,new T2(null,this._ngForOf,-1,-1),null===o?void 0:o),l=new Gb(i,a);r.push(l)}else if(null==o)this._viewContainer.remove(null===s?void 0:s);else if(null!==s){const a=this._viewContainer.get(s);this._viewContainer.move(a,o);const l=new Gb(i,a);r.push(l)}});for(let i=0;i<r.length;i++)this._perViewChange(r[i].view,r[i].record);for(let i=0,s=this._viewContainer.length;i<s;i++){const o=this._viewContainer.get(i);o.context.index=i,o.context.count=s,o.context.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{this._viewContainer.get(i.currentIndex).context.$implicit=i.item})}_perViewChange(n,r){n.context.$implicit=r.item}static ngTemplateContextGuard(n,r){return!0}}return t.\u0275fac=function(n){return new(n||t)(z(Sn),z(Gn),z(So))},t.\u0275dir=Pt({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class Gb{constructor(e,n){this.record=e,this.view=n}}let Qb=(()=>{class t{constructor(n,r,i){this._ngEl=n,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(n){this._ngStyle=n,!this._differ&&n&&(this._differ=this._differs.find(n).create())}ngDoCheck(){if(this._differ){const n=this._differ.diff(this._ngStyle);n&&this._applyChanges(n)}}_setStyle(n,r){const[i,s]=n.split(".");null!=(r=null!=r&&s?`${r}${s}`:r)?this._renderer.setStyle(this._ngEl.nativeElement,i,r):this._renderer.removeStyle(this._ngEl.nativeElement,i)}_applyChanges(n){n.forEachRemovedItem(r=>this._setStyle(r.key,null)),n.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),n.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return t.\u0275fac=function(n){return new(n||t)(z(nn),z(fs),z(VI))},t.\u0275dir=Pt({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),t})(),eB=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Gs({type:t}),t.\u0275inj=Fr({providers:[{provide:Iu,useClass:I2}]}),t})();class Kh extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function(t){fu||(fu=t)}(new Kh)}onAndCancel(e,n,r){return e.addEventListener(n,r,!1),()=>{e.removeEventListener(n,r,!1)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=(Ko=Ko||document.querySelector("base"),Ko?Ko.getAttribute("href"):null);return null==n?null:function(t){Du=Du||document.createElement("a"),Du.setAttribute("href",t);const e=Du.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Ko=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Du,Ko=null;const Zb=new re("TRANSITION_ID"),cB=[{provide:eu,useFactory:function(t,e,n){return()=>{n.get(vs).donePromise.then(()=>{const r=qo(),i=e.querySelectorAll(`style[ng-transition="${t}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[Zb,at,fe],multi:!0}];class Yh{static init(){!function(t){Ch=t}(new Yh)}addToWindow(e){J.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},J.getAllAngularTestabilities=()=>e.getAllTestabilities(),J.getAllAngularRootElements=()=>e.getAllRootElements(),J.frameworkStabilizers||(J.frameworkStabilizers=[]),J.frameworkStabilizers.push(r=>{const i=J.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(l){o=o||l,s--,0==s&&r(o)};i.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,n,r){if(null==n)return null;const i=e.getTestability(n);return null!=i?i:r?qo().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null}}let dB=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=te({token:t,factory:t.\u0275fac}),t})();const Yo=new re("EventManagerPlugins");let wu=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>i.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}addGlobalEventListener(n,r,i){return this._findPluginFor(r).addGlobalEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const o=i[s];if(o.supports(n))return this._eventNameToPlugin.set(n,o),o}throw new Error(`No event manager plugin found for event ${n}`)}}return t.\u0275fac=function(n){return new(n||t)(q(Yo),q($e))},t.\u0275prov=te({token:t,factory:t.\u0275fac}),t})();class Jh{constructor(e){this._doc=e}addGlobalEventListener(e,n,r){const i=qo().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${n}`);return this.addEventListener(i,n,r)}}let ew=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(n){const r=new Set;n.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=te({token:t,factory:t.\u0275fac}),t})(),Jo=(()=>{class t extends ew{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,r,i){n.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,i.push(r.appendChild(o))})}addHost(n){const r=[];this._addStylesToHost(this._stylesSet,n,r),this._hostNodes.set(n,r)}removeHost(n){const r=this._hostNodes.get(n);r&&r.forEach(tw),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(n,i,r)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(tw))}}return t.\u0275fac=function(n){return new(n||t)(q(at))},t.\u0275prov=te({token:t,factory:t.\u0275fac}),t})();function tw(t){qo().remove(t)}const Zh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Xh=/%COMP%/g;function Tu(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Tu(t,i,n):(i=i.replace(Xh,t),n.push(i))}return n}function iw(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let ep=(()=>{class t{constructor(n,r,i){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new tp(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;switch(r.encapsulation){case Ae.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new TB(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(n),i}case 1:case Ae.ShadowDom:return new SB(this.eventManager,this.sharedStylesHost,n,r);default:if(!this.rendererByCompId.has(r.id)){const i=Tu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(n){return new(n||t)(q(wu),q(Jo),q(Uo))},t.\u0275prov=te({token:t,factory:t.\u0275fac}),t})();class tp{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,n){return n?document.createElementNS(Zh[n]||n,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,n){e.appendChild(n)}insertBefore(e,n,r){e&&e.insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const s=Zh[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=Zh[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Dt.DashCase|Dt.Important)?e.style.setProperty(n,r,i&Dt.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Dt.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,n,iw(r)):this.eventManager.addEventListener(e,n,iw(r))}}class TB extends tp{constructor(e,n,r,i){super(e),this.component=r;const s=Tu(i+"-"+r.id,r.styles,[]);n.addStyles(s),this.contentAttr=function(t){return"_ngcontent-%COMP%".replace(Xh,t)}(i+"-"+r.id),this.hostAttr=function(t){return"_nghost-%COMP%".replace(Xh,t)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}class SB extends tp{constructor(e,n,r,i){super(e),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Tu(i.id,i.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let AB=(()=>{class t extends Jh{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}}return t.\u0275fac=function(n){return new(n||t)(q(at))},t.\u0275prov=te({token:t,factory:t.\u0275fac}),t})();const aw=["alt","control","meta","shift"],OB={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},lw={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},FB={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let LB=(()=>{class t extends Jh{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>qo().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=t._normalizeKey(r.pop());let o="";if(aw.forEach(l=>{const u=r.indexOf(l);u>-1&&(r.splice(u,1),o+=l+".")}),o+=s,0!=r.length||0===s.length)return null;const a={};return a.domEventName=i,a.fullKey=o,a}static getEventFullKey(n){let r="",i=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&lw.hasOwnProperty(e)&&(e=lw[e]))}return OB[e]||e}(n);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),aw.forEach(s=>{s!=i&&FB[s](n)&&(r+=s+".")}),r+=i,r}static eventCallback(n,r,i){return s=>{t.getEventFullKey(s)===n&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return t.\u0275fac=function(n){return new(n||t)(q(at))},t.\u0275prov=te({token:t,factory:t.\u0275fac}),t})();const $B=[{provide:ph,useValue:"browser"},{provide:zD,useValue:function(){Kh.makeCurrent(),Yh.init()},multi:!0},{provide:at,useFactory:function(){return function(t){Jc=t}(document),document},deps:[]}],GB=rb(ML,"browser",$B),qB=[[],{provide:mo,useValue:"root"},{provide:Kr,useFactory:function(){return new Kr},deps:[]},{provide:Yo,useClass:AB,multi:!0,deps:[at,$e,ph]},{provide:Yo,useClass:LB,multi:!0,deps:[at]},[],{provide:ep,useClass:ep,deps:[wu,Jo,Uo]},{provide:Wl,useExisting:ep},{provide:ew,useExisting:Jo},{provide:Jo,useClass:Jo,deps:[at]},{provide:Eh,useClass:Eh,deps:[$e]},{provide:wu,useClass:wu,deps:[Yo,$e]},{provide:class{},useClass:dB,deps:[]},[]];let zB=(()=>{class t{constructor(n){if(n)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(n){return{ngModule:t,providers:[{provide:Uo,useValue:n.appId},{provide:Zb,useExisting:Uo},cB]}}}return t.\u0275fac=function(n){return new(n||t)(q(t,12))},t.\u0275mod=Gs({type:t}),t.\u0275inj=Fr({providers:qB,imports:[eB,BL]}),t})();function cw(t,e,n,r,i,s,o){try{var a=t[s](o),l=a.value}catch(u){return void n(u)}a.done?e(l):Promise.resolve(l).then(r,i)}function y(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var s=t.apply(e,n);function o(l){cw(s,r,i,o,a,"next",l)}function a(l){cw(s,r,i,o,a,"throw",l)}o(void 0)})}}"undefined"!=typeof window&&window;const C=function(t,e){if(!t)throw Is(e)},Is=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},dw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},ap={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0;let f=(15&a)<<2|u>>6,h=63&u;l||(h=64,o||(f=64)),r.push(n[s>>2],n[(3&s)<<4|a>>4],n[f],n[h])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(dw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const l=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(1023&l))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,null==s||null==a||null==u||null==d)throw Error();r.push(s<<2|a>>4),64!==u&&(r.push(a<<4&240|u>>2),64!==d&&r.push(u<<6&192|d))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},fw=function(t){const e=dw(t);return ap.encodeByteArray(e,!0)},Su=function(t){return fw(t).replace(/\./g,"")},Au=function(t){try{return ap.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function nU(t){return hw(void 0,t)}function hw(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!rU(n)||(t[n]=hw(t[n],e[n]));return t}function rU(t){return"__proto__"!==t}const Nu=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"==typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const e=t&&Au(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},pw=t=>{var e,n;return null===(n=null===(e=Nu())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]},gw=t=>{var e;return null===(e=Nu())||void 0===e?void 0:e[`_${t}`]};class An{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(n):e(n,r))}}}function Ve(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function lp(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())}function _w(){return"object"==typeof navigator&&"ReactNative"===navigator.product}class vr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,vr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zo.prototype.create)}}class Zo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?function(t,e){return t.replace(yU,(n,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(s,r):"Error";return new vr(i,`${this.serviceName}: ${o} (${i}).`,r)}}const yU=/\{\$([^}]+)}/g;function Xo(t){return JSON.parse(t)}function Be(t){return JSON.stringify(t)}const Ru=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Xo(Au(s[0])||""),n=Xo(Au(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}};function Nn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ds(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Pu(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Mu(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function xu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(mw(s)&&mw(o)){if(!xu(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function mw(t){return null!==t&&"object"==typeof t}function ea(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}class CU{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if("string"==typeof e)for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=4294967295&(f<<1|f>>>31)}let u,c,i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4];for(let d=0;d<80;d++){d<40?d<20?(u=a^s&(o^a),c=1518500249):(u=s^o^a,c=1859775393):d<60?(u=s&o|a&(s|o),c=2400959708):(u=s^o^a,c=3395469782);const f=(i<<5|i>>>27)+u+l+c+r[d]&4294967295;l=a,a=o,o=4294967295&(s<<30|s>>>2),s=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(null==e)return;void 0===n&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(0===o)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if("string"==typeof e){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&n,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}class DU{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(void 0===e&&void 0===n&&void 0===r)throw new Error("Missing Observer.");i=function(t,e){if("object"!=typeof t||null===t)return!1;for(const n of["next","error","complete"])if(n in t&&"function"==typeof t[n])return!0;return!1}(e)?e:{next:e,error:n,complete:r},void 0===i.next&&(i.next=up),void 0===i.error&&(i.error=up),void 0===i.complete&&(i.complete=up);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(o){}}),this.observers.push(i),s}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{n(this.observers[e])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function up(){}function Yn(t,e){return`${t} failed: ${e} argument `}const ku=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function Ht(t){return t&&t._delegate?t._delegate:t}class oi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ai="[DEFAULT]";class PU{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new An;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch(i){}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(n=null==e?void 0:e.optional)&&void 0!==n&&n;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ai})}catch(n){}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch(s){}}}}clearInstance(e=ai){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return y(function*(){const n=Array.from(e.instances.values());yield Promise.all([...n.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...n.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=ai){return this.instances.has(e)}getOptions(e=ai){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(s)&&o.resolve(i);return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch(s){}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:MU(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(i){}return r||null}normalizeInstanceIdentifier(e=ai){return this.component?this.component.multipleInstances?e:ai:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function MU(t){return t===ai?void 0:t}class kU{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new PU(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}const cp=[];var ee=(()=>(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(ee||(ee={})),ee))();const yw={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},OU=ee.INFO,FU={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},LU=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=FU[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class dp{constructor(e){this.name=e,this._logLevel=OU,this._logHandler=LU,this._userLogHandler=null,cp.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?yw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...e),this._logHandler(this,ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...e),this._logHandler(this,ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...e),this._logHandler(this,ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...e),this._logHandler(this,ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...e),this._logHandler(this,ee.ERROR,...e)}}let vw,Ew;const Cw=new WeakMap,fp=new WeakMap,Iw=new WeakMap,hp=new WeakMap,pp=new WeakMap;let gp={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return fp.get(t);if("objectStoreNames"===e)return t.objectStoreNames||Iw.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Er(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function GU(t){return"function"==typeof t?function(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ew||(Ew=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(_p(this),e),Er(Cw.get(this))}:function(...e){return Er(t.apply(_p(this),e))}:function(e,...n){const r=t.call(_p(this),e,...n);return Iw.set(r,e.sort?e.sort():[e]),Er(r)}}(t):(t instanceof IDBTransaction&&function(t){if(fp.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});fp.set(t,e)}(t),((t,e)=>e.some(n=>t instanceof n))(t,vw||(vw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,gp):t)}function Er(t){if(t instanceof IDBRequest)return function(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Er(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Cw.set(n,t)}).catch(()=>{}),pp.set(e,t),e}(t);if(hp.has(t))return hp.get(t);const e=GU(t);return e!==t&&(hp.set(t,e),pp.set(e,t)),e}const _p=t=>pp.get(t),zU=["get","getKey","getAll","getAllKeys","count"],QU=["put","add","delete","clear"],mp=new Map;function Dw(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(mp.get(e))return mp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=QU.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!zU.includes(n))return;const s=function(){var o=y(function*(a,...l){const u=this.transaction(a,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(l.shift())),(yield Promise.all([c[n](...l),i&&u.done]))[0]});return function(l){return o.apply(this,arguments)}}();return mp.set(e,s),s}gp=(t=>VS(LS({},t),{get:(e,n,r)=>Dw(e,n)||t.get(e,n,r),has:(e,n)=>!!Dw(e,n)||t.has(e,n)}))(gp);class KU{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}return null}).filter(n=>n).join(" ")}}const yp="@firebase/app",li=new dp("@firebase/app"),Ou="[DEFAULT]",Ij={[yp]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ui=new Map,Fu=new Map;function Dj(t,e){try{t.container.addComponent(e)}catch(n){li.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function bs(t){const e=t.name;if(Fu.has(e))return li.debug(`There were multiple attempts to register component ${e}.`),!1;Fu.set(e,t);for(const n of ui.values())Dj(n,t);return!0}function Lu(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const Jn=new Zo("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class wj{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new oi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Jn.create("app-deleted",{appName:this._name})}}const ta="9.17.1";function ww(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:Ou,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw Jn.create("bad-app-name",{appName:String(i)});if(n||(n=(()=>{var t;return null===(t=Nu())||void 0===t?void 0:t.config})()),!n)throw Jn.create("no-options");const s=ui.get(i);if(s){if(xu(n,s.options)&&xu(r,s.config))return s;throw Jn.create("duplicate-app",{appName:i})}const o=new kU(i);for(const l of Fu.values())o.addComponent(l);const a=new wj(n,r,o);return ui.set(i,a),a}function Tw(t=Ou){const e=ui.get(t);if(!e&&t===Ou)return ww();if(!e)throw Jn.create("no-app",{appName:t});return e}function Cr(t,e,n){var r;let i=null!==(r=Ij[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];return s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void li.warn(a.join(" "))}bs(new oi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const na="firebase-heartbeat-store";let Ep=null;function Sw(){return Ep||(Ep=function(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Er(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Er(o.result),l.oldVersion,l.newVersion,Er(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(t,e)=>{0===e&&t.createObjectStore(na)}}).catch(t=>{throw Jn.create("idb-open",{originalErrorMessage:t.message})})),Ep}function Cp(){return Cp=y(function*(t){try{return(yield Sw()).transaction(na).objectStore(na).get(Nw(t))}catch(e){if(e instanceof vr)li.warn(e.message);else{const n=Jn.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});li.warn(n.message)}}}),Cp.apply(this,arguments)}function Aw(t,e){return Ip.apply(this,arguments)}function Ip(){return Ip=y(function*(t,e){try{const r=(yield Sw()).transaction(na,"readwrite");return yield r.objectStore(na).put(e,Nw(t)),r.done}catch(n){if(n instanceof vr)li.warn(n.message);else{const r=Jn.create("idb-set",{originalErrorMessage:null==n?void 0:n.message});li.warn(r.message)}}}),Ip.apply(this,arguments)}function Nw(t){return`${t.name}!${t.options.appId}`}class Pj{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new xj(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return y(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Rw();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(s=>s.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return y(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const n=Rw(),{heartbeatsToSend:r,unsentEntries:i}=function(t,e=1024){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Pw(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Pw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=Su(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function Rw(){return(new Date).toISOString().substring(0,10)}class xj{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return y(function*(){return!!function(){try{return"object"==typeof indexedDB}catch(t){return!1}}()&&new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e((null===(s=i.error)||void 0===s?void 0:s.message)||"")}}catch(n){e(n)}}).then(()=>!0).catch(()=>!1)})()}read(){var e=this;return y(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function(t){return Cp.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var n=this;return y(function*(){var r;if(yield n._canUseIndexedDBPromise){const s=yield n.read();return Aw(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var n=this;return y(function*(){var r;if(yield n._canUseIndexedDBPromise){const s=yield n.read();return Aw(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function Pw(t){return Su(JSON.stringify({version:2,heartbeats:t})).length}function xw(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}bs(new oi("platform-logger",e=>new KU(e),"PRIVATE")),bs(new oi("heartbeat",e=>new Pj(e),"PRIVATE")),Cr(yp,"0.9.3",""),Cr(yp,"0.9.3","esm2017"),Cr("fire-js","");const Lj=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Lw=new Zo("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Vw=new dp("@firebase/auth");function Bu(t,...e){Vw.logLevel<=ee.ERROR&&Vw.error(`Auth (${ta}): ${t}`,...e)}function ht(t,...e){throw bp(t,...e)}function Rn(t,...e){return bp(t,...e)}function Bw(t,e,n){const r=Object.assign(Object.assign({},Lj()),{[e]:n});return new Zo("auth","Firebase",r).create(e,{appName:t.name})}function bp(t,...e){if("string"!=typeof t){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Lw.create(t,...e)}function I(t,e,...n){if(!t)throw bp(e,...n)}function Pn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Bu(e),new Error(e)}function Ir(t,e){t||Pn(e)}const Uw=new Map;function Zn(t){Ir(t instanceof Function,"Expected a class definition");let e=Uw.get(t);return e?(Ir(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Uw.set(t,e),e)}function ra(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function jw(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}function Uj(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===jw()||"https:"===jw()||function(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}()||"connection"in navigator))||navigator.onLine}class ia{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ir(n>e,"Short delay should be less than long delay!"),this.isMobile=lp()||_w()}get(){return Uj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Tp(t,e){Ir(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class Hw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Pn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Pn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Pn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Hj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},$j=new ia(3e4,6e4);function xe(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Ue(t,e,n,r){return Sp.apply(this,arguments)}function Sp(){return Sp=y(function*(t,e,n,r,i={}){return $w(t,i,y(function*(){let s={},o={};r&&("GET"===e?o=r:s={body:JSON.stringify(r)});const a=ea(Object.assign({key:t.config.apiKey},o)).slice(1),l=yield t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),Hw.fetch()(Ww(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))}))}),Sp.apply(this,arguments)}function $w(t,e,n){return Ap.apply(this,arguments)}function Ap(){return Ap=y(function*(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Hj),e);try{const i=new Wj(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=yield s.json();if("needConfirmation"in o)throw sa(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===l)throw sa(t,"credential-already-in-use",o);if("EMAIL_EXISTS"===l)throw sa(t,"email-already-in-use",o);if("USER_DISABLED"===l)throw sa(t,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Bw(t,c,u);ht(t,c)}}catch(i){if(i instanceof vr)throw i;ht(t,"network-request-failed")}}),Ap.apply(this,arguments)}function Xn(t,e,n,r){return Np.apply(this,arguments)}function Np(){return Np=y(function*(t,e,n,r,i={}){const s=yield Ue(t,e,n,r,i);return"mfaPendingCredential"in s&&ht(t,"multi-factor-auth-required",{_serverResponse:s}),s}),Np.apply(this,arguments)}function Ww(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Tp(t.config,i):`${t.config.apiScheme}://${i}`}class Wj{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Rn(this.auth,"network-request-failed")),$j.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function sa(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Rn(t,e,r);return i.customData._tokenResponse=n,i}function Rp(){return Rp=y(function*(t,e){return Ue(t,"POST","/v1/accounts:delete",e)}),Rp.apply(this,arguments)}function zj(t,e){return Mp.apply(this,arguments)}function Mp(){return Mp=y(function*(t,e){return Ue(t,"POST","/v1/accounts:lookup",e)}),Mp.apply(this,arguments)}function oa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}function xp(){return xp=y(function*(t,e=!1){const n=Ht(t),r=yield n.getIdToken(e),i=Uu(r);I(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:oa(kp(i.auth_time)),issuedAtTime:oa(kp(i.iat)),expirationTime:oa(kp(i.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}),xp.apply(this,arguments)}function kp(t){return 1e3*Number(t)}function Uu(t){const[e,n,r]=t.split(".");if(void 0===e||void 0===n||void 0===r)return Bu("JWT malformed, contained fewer than 3 sections"),null;try{const i=Au(n);return i?JSON.parse(i):(Bu("Failed to decode base64 JWT payload"),null)}catch(i){return Bu("Caught error parsing JWT payload as JSON",null==i?void 0:i.toString()),null}}function er(t,e){return Op.apply(this,arguments)}function Op(){return Op=y(function*(t,e,n=!1){if(n)return e;try{return yield e}catch(r){throw r instanceof vr&&Yj(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}}),Op.apply(this,arguments)}function Yj({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}class Jj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(n=this.user.stsTokenManager.expirationTime)&&void 0!==n?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var n=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(y(function*(){yield n.iteration()}),r)}iteration(){var e=this;return y(function*(){try{yield e.user.getIdToken(!0)}catch(n){return void("auth/network-request-failed"===(null==n?void 0:n.code)&&e.schedule(!0))}e.schedule()})()}}class Gw{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=oa(this.lastLoginAt),this.creationTime=oa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function aa(t){return Fp.apply(this,arguments)}function Fp(){return Fp=y(function*(t){var e;const n=t.auth,r=yield t.getIdToken(),i=yield er(t,zj(n,{idToken:r}));I(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=(null===(e=s.providerUserInfo)||void 0===e?void 0:e.length)?eH(s.providerUserInfo):[],a=Xj(t.providerData,o),c=!!t.isAnonymous&&!(t.email&&s.passwordHash||(null==a?void 0:a.length)),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Gw(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,d)}),Fp.apply(this,arguments)}function Lp(){return Lp=y(function*(t){const e=Ht(t);yield aa(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}),Lp.apply(this,arguments)}function Xj(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function eH(t){return t.map(e=>{var{providerId:n}=e,r=xw(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function Vp(){return Vp=y(function*(t,e){const n=yield $w(t,{},y(function*(){const r=ea({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=Ww(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Hw.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}),Vp.apply(this,arguments)}class la{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){I(e.idToken,"internal-error"),I(void 0!==e.idToken,"internal-error"),I(void 0!==e.refreshToken,"internal-error");const n="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(t){const e=Uu(t);return I(e,"internal-error"),I(void 0!==e.exp,"internal-error"),I(void 0!==e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}getToken(e,n=!1){var r=this;return y(function*(){return I(!r.accessToken||r.refreshToken,e,"user-token-expired"),n||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,n){var r=this;return y(function*(){const{accessToken:i,refreshToken:s,expiresIn:o}=yield function(t,e){return Vp.apply(this,arguments)}(e,n);r.updateTokensAndExpiration(i,s,Number(o))})()}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new la;return r&&(I("string"==typeof r,"internal-error",{appName:e}),o.refreshToken=r),i&&(I("string"==typeof i,"internal-error",{appName:e}),o.accessToken=i),s&&(I("number"==typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new la,this.toJSON())}_performRefresh(){return Pn("not implemented")}}function Dr(t,e){I("string"==typeof t||void 0===t,"internal-error",{appName:e})}class ci{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=xw(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Jj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Gw(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var n=this;return y(function*(){const r=yield er(n,n.stsTokenManager.getToken(n.auth,e));return I(r,n.auth,"internal-error"),n.accessToken!==r&&(n.accessToken=r,yield n.auth._persistUserIfCurrent(n),n.auth._notifyListenersIfCurrent(n)),r})()}getIdTokenResult(e){return function(t){return xp.apply(this,arguments)}(this,e)}reload(){return function(t){return Lp.apply(this,arguments)}(this)}_assign(e){this!==e&&(I(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new ci(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){I(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){var r=this;return y(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),n&&(yield aa(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return y(function*(){const n=yield e.getIdToken();return yield er(e,function(t,e){return Rp.apply(this,arguments)}(e.auth,{idToken:n})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,c;const d=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,h=null!==(s=n.phoneNumber)&&void 0!==s?s:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,_=null!==(a=n.tenantId)&&void 0!==a?a:void 0,g=null!==(l=n._redirectEventId)&&void 0!==l?l:void 0,v=null!==(u=n.createdAt)&&void 0!==u?u:void 0,m=null!==(c=n.lastLoginAt)&&void 0!==c?c:void 0,{uid:w,emailVerified:T,isAnonymous:L,providerData:ye,stsTokenManager:ut}=n;I(w&&ut,e,"internal-error");const Di=la.fromJSON(this.name,ut);I("string"==typeof w,e,"internal-error"),Dr(d,e.name),Dr(f,e.name),I("boolean"==typeof T,e,"internal-error"),I("boolean"==typeof L,e,"internal-error"),Dr(h,e.name),Dr(p,e.name),Dr(_,e.name),Dr(g,e.name),Dr(v,e.name),Dr(m,e.name);const Fn=new ci({uid:w,auth:e,email:f,emailVerified:T,displayName:d,isAnonymous:L,photoURL:p,phoneNumber:h,tenantId:_,stsTokenManager:Di,createdAt:v,lastLoginAt:m});return ye&&Array.isArray(ye)&&(Fn.providerData=ye.map(Or=>Object.assign({},Or))),g&&(Fn._redirectEventId=g),Fn}static _fromIdTokenResponse(e,n,r=!1){return y(function*(){const i=new la;i.updateFromServerResponse(n);const s=new ci({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield aa(s),s})()}}const qw=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return y(function*(){return!0})()}_set(n,r){var i=this;return y(function*(){i.storage[n]=r})()}_get(n){var r=this;return y(function*(){const i=r.storage[n];return void 0===i?null:i})()}_remove(n){var r=this;return y(function*(){delete r.storage[n]})()}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})();function ju(t,e,n){return`firebase:${t}:${e}:${n}`}class Ts{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=ju(this.userKey,i.apiKey,s),this.fullPersistenceKey=ju("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return y(function*(){const n=yield e.persistence._get(e.fullUserKey);return n?ci._fromJSON(e.auth,n):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var n=this;return y(function*(){if(n.persistence===e)return;const r=yield n.getCurrentUser();return yield n.removeCurrentUser(),n.persistence=e,r?n.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return y(function*(){if(!n.length)return new Ts(Zn(qw),e,r);const i=(yield Promise.all(n.map(function(){var u=y(function*(c){if(yield c._isAvailable())return c});return function(c){return u.apply(this,arguments)}}()))).filter(u=>u);let s=i[0]||Zn(qw);const o=ju(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const c=yield u._get(o);if(c){const d=ci._fromJSON(e,c);u!==s&&(a=d),s=u;break}}catch(c){}const l=i.filter(u=>u._shouldAllowMigration);return s._shouldAllowMigration&&l.length?(s=l[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(function(){var u=y(function*(c){if(c!==s)try{yield c._remove(o)}catch(d){}});return function(c){return u.apply(this,arguments)}}())),new Ts(s,e,r)):new Ts(s,e,r)})()}}function zw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Yw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Qw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Zw(e))return"Blackberry";if(Xw(e))return"Webos";if(Bp(e))return"Safari";if((e.includes("chrome/")||Kw(e))&&!e.includes("edge/"))return"Chrome";if(Jw(e))return"Android";{const r=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==r?void 0:r.length))return r[1]}return"Other"}function Qw(t=Ve()){return/firefox\//i.test(t)}function Bp(t=Ve()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Kw(t=Ve()){return/crios\//i.test(t)}function Yw(t=Ve()){return/iemobile/i.test(t)}function Jw(t=Ve()){return/android/i.test(t)}function Zw(t=Ve()){return/blackberry/i.test(t)}function Xw(t=Ve()){return/webos/i.test(t)}function Hu(t=Ve()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function eT(t=Ve()){return Hu(t)||Jw(t)||Xw(t)||Zw(t)||/windows phone/i.test(t)||Yw(t)}function tT(t,e=[]){let n;switch(t){case"Browser":n=zw(Ve());break;case"Worker":n=`${zw(Ve())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ta}/${r}`}class sH{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{o(e(s))}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var n=this;return y(function*(){if(n.auth.currentUser===e)return;const r=[];try{for(const i of n.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch(o){}throw n.auth._errorFactory.create("login-blocked",{originalMessage:null==i?void 0:i.message})}})()}}class oH{constructor(e,n,r){this.app=e,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nT(this),this.idTokenSubscription=new nT(this),this.beforeStateQueue=new sH(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Lw,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){var r=this;return n&&(this._popupRedirectResolver=Zn(n)),this._initializationPromise=this.queue(y(function*(){var i,s;if(!r._deleted&&(r.persistenceManager=yield Ts.create(r,e),!r._deleted)){if(null===(i=r._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch(o){}yield r.initializeCurrentUser(n),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return y(function*(){if(e._deleted)return;const n=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||n){if(e.currentUser&&n&&e.currentUser.uid===n.uid)return e._currentUser._assign(n),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(n,!0)}})()}initializeCurrentUser(e){var n=this;return y(function*(){var r;const i=yield n.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&n.config.authDomain){yield n.getOrInitRedirectPersistenceManager();const a=null===(r=n.redirectUser)||void 0===r?void 0:r._redirectEventId,l=null==s?void 0:s._redirectEventId,u=yield n.tryRedirectSignIn(e);(!a||a===l)&&(null==u?void 0:u.user)&&(s=u.user,o=!0)}if(!s)return n.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{yield n.beforeStateQueue.runMiddleware(s)}catch(a){s=i,n._popupRedirectResolver._overrideRedirectResult(n,()=>Promise.reject(a))}return s?n.reloadAndSetCurrentUserOrClear(s):n.directlySetCurrentUser(null)}return I(n._popupRedirectResolver,n,"argument-error"),yield n.getOrInitRedirectPersistenceManager(),n.redirectUser&&n.redirectUser._redirectEventId===s._redirectEventId?n.directlySetCurrentUser(s):n.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var n=this;return y(function*(){let r=null;try{r=yield n._popupRedirectResolver._completeRedirectFn(n,e,!0)}catch(i){yield n._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var n=this;return y(function*(){try{yield aa(e)}catch(r){if("auth/network-request-failed"!==(null==r?void 0:r.code))return n.directlySetCurrentUser(null)}return n.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}_delete(){var e=this;return y(function*(){e._deleted=!0})()}updateCurrentUser(e){var n=this;return y(function*(){const r=e?Ht(e):null;return r&&I(r.auth.config.apiKey===n.config.apiKey,n,"invalid-user-token"),n._updateCurrentUser(r&&r._clone(n))})()}_updateCurrentUser(e,n=!1){var r=this;return y(function*(){if(!r._deleted)return e&&I(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),n||(yield r.beforeStateQueue.runMiddleware(e)),r.queue(y(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return y(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var n=this;return this.queue(y(function*(){yield n.assertedPersistence.setPersistence(Zn(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Zo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,n){var r=this;return y(function*(){const i=yield r.getOrInitRedirectPersistenceManager(n);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var n=this;return y(function*(){if(!n.redirectPersistenceManager){const r=e&&Zn(e)||n._popupRedirectResolver;I(r,n,"argument-error"),n.redirectPersistenceManager=yield Ts.create(n,[Zn(r._redirectPersistence)],"redirectUser"),n.redirectUser=yield n.redirectPersistenceManager.getCurrentUser()}return n.redirectPersistenceManager})()}_redirectUserForId(e){var n=this;return y(function*(){var r,i;return n._isInitialized&&(yield n.queue(y(function*(){}))),(null===(r=n._currentUser)||void 0===r?void 0:r._redirectEventId)===e?n._currentUser:(null===(i=n.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?n.redirectUser:null})()}_persistUserIfCurrent(e){var n=this;return y(function*(){if(e===n.currentUser)return n.queue(y(function*(){return n.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(n=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==n?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s="function"==typeof n?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return I(o,this,"internal-error"),o.then(()=>s(this.currentUser)),"function"==typeof n?e.addObserver(n,r,i):e.addObserver(n)}directlySetCurrentUser(e){var n=this;return y(function*(){n.currentUser&&n.currentUser!==e&&n._currentUser._stopProactiveRefresh(),e&&n.isProactiveRefreshEnabled&&e._startProactiveRefresh(),n.currentUser=e,e?yield n.assertedPersistence.setCurrentUser(e):yield n.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return I(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return y(function*(){var n;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(n=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getHeartbeatsHeader();return i&&(r["X-Firebase-Client"]=i),r})()}}function pt(t){return Ht(t)}class nT{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(t,e){const n=new DU(t,void 0);return n.subscribe.bind(n)}(n=>this.observer=n)}get next(){return I(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function rT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function iT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function tr(t,e){return Zp.apply(this,arguments)}function Zp(){return Zp=y(function*(t,e){return Xn(t,"POST","/v1/accounts:signInWithIdp",xe(t,e))}),Zp.apply(this,arguments)}class br{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class SH extends br{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}function lT(t,e){return ig.apply(this,arguments)}function ig(){return ig=y(function*(t,e){return Xn(t,"POST","/v1/accounts:signUp",xe(t,e))}),ig.apply(this,arguments)}class $t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return y(function*(){const s=yield ci._fromIdTokenResponse(e,r,i),o=uT(r);return new $t({user:s,providerId:o,_tokenResponse:r,operationType:n})})()}static _forOperation(e,n,r){return y(function*(){yield e._updateTokensIfNecessary(r,!0);const i=uT(r);return new $t({user:e,providerId:i,_tokenResponse:r,operationType:n})})()}}function uT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}function sg(){return sg=y(function*(t){var e;const n=pt(t);if(yield n._initializationPromise,null===(e=n.currentUser)||void 0===e?void 0:e.isAnonymous)return new $t({user:n.currentUser,providerId:null,operationType:"signIn"});const r=yield lT(n,{returnSecureToken:!0}),i=yield $t._fromIdTokenResponse(n,"signIn",r,!0);return yield n._updateCurrentUser(i.user),i}),sg.apply(this,arguments)}class qu extends vr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,qu.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new qu(e,n,r,i)}}function cT(t,e,n,r){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw"auth/multi-factor-auth-required"===s.code?qu._fromErrorAndOperation(t,s,e,r):s})}function ag(t,e){return lg.apply(this,arguments)}function lg(){return lg=y(function*(t,e,n=!1){const r=yield er(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return $t._forOperation(t,"link",r)}),lg.apply(this,arguments)}function cg(){return cg=y(function*(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=yield er(t,cT(r,i,e,t),n);I(s.idToken,r,"internal-error");const o=Uu(s.idToken);I(o,r,"internal-error");const{sub:a}=o;return I(t.uid===a,r,"user-mismatch"),$t._forOperation(t,i,s)}catch(s){throw"auth/user-not-found"===(null==s?void 0:s.code)&&ht(r,"user-mismatch"),s}}),cg.apply(this,arguments)}function dg(){return dg=y(function*(t,e,n=!1){const r="signIn",i=yield cT(t,r,e),s=yield $t._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s}),dg.apply(this,arguments)}new WeakMap;const Ku="__sak";class gT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ku,"1"),this.storage.removeItem(Ku),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const YH=(()=>{class t extends gT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const t=Ve();return Bp(t)||Hu(t)}()&&function(){try{return!(!window||window===window.top)}catch(t){return!1}}(),this.fallbackToPolling=eT(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key)return void this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});const i=n.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(i);if(n.newValue!==a)null!==n.newValue?this.storage.setItem(i,n.newValue):this.storage.removeItem(i);else if(this.localCache[i]===n.newValue&&!r)return}const s=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);!function(){const t=Ve();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||10!==document.documentMode||o===n.newValue||n.newValue===n.oldValue?s():setTimeout(s,10)}notifyListeners(n,r){this.localCache[n]=r;const i=this.listeners[n];if(i)for(const s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(n,r){var i=()=>super._set,s=this;return y(function*(){yield i().call(s,n,r),s.localCache[n]=JSON.stringify(r)})()}_get(n){var r=()=>super._get,i=this;return y(function*(){const s=yield r().call(i,n);return i.localCache[n]=JSON.stringify(s),s})()}_remove(n){var r=()=>super._remove,i=this;return y(function*(){yield r().call(i,n),delete i.localCache[n]})()}}return t.type="LOCAL",t})(),_T=(()=>{class t extends gT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})();let ZH=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){const r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;const i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){var r=this;return y(function*(){const i=n,{eventId:s,eventType:o,data:a}=i.data,l=r.handlersMap[o];if(!(null==l?void 0:l.size))return;i.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const u=Array.from(l).map(function(){var d=y(function*(f){return f(i.origin,a)});return function(f){return d.apply(this,arguments)}}()),c=yield function(t){return Promise.all(t.map(function(){var e=y(function*(n){try{return{fulfilled:!0,value:yield n}}catch(r){return{fulfilled:!1,reason:r}}});return function(n){return e.apply(this,arguments)}}()))}(u);i.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:c})})()}_subscribe(n,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||0===this.handlersMap[n].size)&&delete this.handlersMap[n],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return t.receivers=[],t})();function Ug(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(10*Math.random());return t+n}class XH{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){var i=this;return y(function*(){const s="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,a;return new Promise((l,u)=>{const c=Ug("",20);s.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(f){const h=f;if(h.data.eventId===c)switch(h.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(h.data.response);break;default:clearTimeout(d),clearTimeout(o),u(new Error("invalid_response"))}}},i.handlers.add(a),s.port1.addEventListener("message",a.onMessage),i.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{a&&i.removeMessageHandler(a)})})()}}function ke(){return window}function jg(){return void 0!==ke().WorkerGlobalScope&&"function"==typeof ke().importScripts}function Hg(){return(Hg=y(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(t){return null}})).apply(this,arguments)}const mT="firebaseLocalStorageDb",Yu="firebaseLocalStorage",yT="fbase_key";class fa{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ju(t,e){return t.transaction([Yu],e?"readwrite":"readonly").objectStore(Yu)}function $g(){const t=indexedDB.open(mT,1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Yu,{keyPath:yT})}catch(i){n(i)}}),t.addEventListener("success",y(function*(){const r=t.result;r.objectStoreNames.contains(Yu)?e(r):(r.close(),yield function(){const t=indexedDB.deleteDatabase(mT);return new fa(t).toPromise()}(),e(yield $g()))}))})}function vT(t,e,n){return Wg.apply(this,arguments)}function Wg(){return Wg=y(function*(t,e,n){const r=Ju(t,!0).put({[yT]:e,value:n});return new fa(r).toPromise()}),Wg.apply(this,arguments)}function Gg(){return Gg=y(function*(t,e){const n=Ju(t,!1).get(e),r=yield new fa(n).toPromise();return void 0===r?null:r.value}),Gg.apply(this,arguments)}function ET(t,e){const n=Ju(t,!0).delete(e);return new fa(n).toPromise()}const u3=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var n=this;return y(function*(){return n.db||(n.db=yield $g()),n.db})()}_withRetries(n){var r=this;return y(function*(){let i=0;for(;;)try{const s=yield r._openDb();return yield n(s)}catch(s){if(i++>3)throw s;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var n=this;return y(function*(){return jg()?n.initializeReceiver():n.initializeSender()})()}initializeReceiver(){var n=this;return y(function*(){n.receiver=ZH._getInstance(jg()?self:null),n.receiver._subscribe("keyChanged",function(){var r=y(function*(i,s){return{keyProcessed:(yield n._poll()).includes(s.key)}});return function(i,s){return r.apply(this,arguments)}}()),n.receiver._subscribe("ping",function(){var r=y(function*(i,s){return["keyChanged"]});return function(i,s){return r.apply(this,arguments)}}())})()}initializeSender(){var n=this;return y(function*(){var r,i;if(n.activeServiceWorker=yield function(){return Hg.apply(this,arguments)}(),!n.activeServiceWorker)return;n.sender=new XH(n.activeServiceWorker);const s=yield n.sender._send("ping",{},800);!s||(null===(r=s[0])||void 0===r?void 0:r.fulfilled)&&(null===(i=s[0])||void 0===i?void 0:i.value.includes("keyChanged"))&&(n.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(n){var r=this;return y(function*(){if(r.sender&&r.activeServiceWorker&&function(){var t;return(null===(t=null==navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:n},r.serviceWorkerReceiverAvailable?800:50)}catch(i){}})()}_isAvailable(){return y(function*(){try{if(!indexedDB)return!1;const n=yield $g();return yield vT(n,Ku,"1"),yield ET(n,Ku),!0}catch(n){}return!1})()}_withPendingWrite(n){var r=this;return y(function*(){r.pendingWrites++;try{yield n()}finally{r.pendingWrites--}})()}_set(n,r){var i=this;return y(function*(){return i._withPendingWrite(y(function*(){return yield i._withRetries(s=>vT(s,n,r)),i.localCache[n]=r,i.notifyServiceWorker(n)}))})()}_get(n){var r=this;return y(function*(){const i=yield r._withRetries(s=>function(t,e){return Gg.apply(this,arguments)}(s,n));return r.localCache[n]=i,i})()}_remove(n){var r=this;return y(function*(){return r._withPendingWrite(y(function*(){return yield r._withRetries(i=>ET(i,n)),delete r.localCache[n],r.notifyServiceWorker(n)}))})()}_poll(){var n=this;return y(function*(){const r=yield n._withRetries(o=>{const a=Ju(o,!1).getAll();return new fa(a).toPromise()});if(!r)return[];if(0!==n.pendingWrites)return[];const i=[],s=new Set;for(const{fbase_key:o,value:a}of r)s.add(o),JSON.stringify(n.localCache[o])!==JSON.stringify(a)&&(n.notifyListeners(o,a),i.push(o));for(const o of Object.keys(n.localCache))n.localCache[o]&&!s.has(o)&&(n.notifyListeners(o,null),i.push(o));return i})()}notifyListeners(n,r){this.localCache[n]=r;const i=this.listeners[n];if(i)for(const s of Array.from(i))s(r)}startPolling(){var n=this;this.stopPolling(),this.pollTimer=setInterval(y(function*(){return n._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return t.type="LOCAL",t})();function IT(t){return`__${t}${Math.floor(1e6*Math.random())}`}function fi(t,e){return e?Zn(e):(I(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}IT("rcb"),new ia(3e4,6e4);class t_ extends class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Pn("not implemented")}_getIdTokenResponse(e){return Pn("not implemented")}_linkToIdToken(e,n){return Pn("not implemented")}_getReauthenticationResolver(e){return Pn("not implemented")}}{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return tr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return tr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return tr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function T3(t){return function(t,e){return dg.apply(this,arguments)}(t.auth,new t_(t),t.bypassAuthState)}function S3(t){const{auth:e,user:n}=t;return I(n,e,"internal-error"),function(t,e){return cg.apply(this,arguments)}(n,new t_(t),t.bypassAuthState)}function A3(t){return n_.apply(this,arguments)}function n_(){return n_=y(function*(t){const{auth:e,user:n}=t;return I(n,e,"internal-error"),ag(n,new t_(t),t.bypassAuthState)}),n_.apply(this,arguments)}new ia(2e3,1e4);const ha=new Map;class P3 extends class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){var e=this;return new Promise(function(){var n=y(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(s){e.reject(s)}});return function(r,i){return n.apply(this,arguments)}}())}onAuthEvent(e){var n=this;return y(function*(){const{urlResponse:r,sessionId:i,postBody:s,tenantId:o,error:a,type:l}=e;if(a)return void n.reject(a);const u={auth:n.auth,requestUri:r,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:n.user,bypassAuthState:n.bypassAuthState};try{n.resolve(yield n.getIdpTask(l)(u))}catch(c){n.reject(c)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return T3;case"linkViaPopup":case"linkViaRedirect":return A3;case"reauthViaPopup":case"reauthViaRedirect":return S3;default:ht(this.auth,"internal-error")}}resolve(e){Ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,n=this;return y(function*(){let r=ha.get(n.auth._key());if(!r){try{const s=(yield function(t,e){return a_.apply(this,arguments)}(n.resolver,n.auth))?yield e().call(n):null;r=()=>Promise.resolve(s)}catch(i){r=()=>Promise.reject(i)}ha.set(n.auth._key(),r)}return n.bypassAuthState||ha.set(n.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var n=()=>super.onAuthEvent,r=this;return y(function*(){if("signInViaRedirect"===e.type)return n().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,n().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return y(function*(){})()}cleanUp(){}}function a_(){return a_=y(function*(t,e){const n=wT(e),r=bT(t);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(n));return yield r._remove(n),i}),a_.apply(this,arguments)}function x3(t,e){ha.set(t._key(),e)}function bT(t){return Zn(t._redirectPersistence)}function wT(t){return ju("pendingRedirect",t.config.apiKey,t.name)}function TT(t,e){return p_.apply(this,arguments)}function p_(){return p_=y(function*(t,e,n=!1){const r=pt(t),i=fi(r,e),o=yield new P3(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o}),p_.apply(this,arguments)}class V3{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return NT(t);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!NT(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";n.onError(Rn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=null===n.eventId||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(AT(e))}saveEventToCache(e){this.cachedEventUids.add(AT(e)),this.lastProcessedEventTime=Date.now()}}function AT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function NT({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===(null==e?void 0:e.code)}function U3(t){return __.apply(this,arguments)}function __(){return __=y(function*(t,e={}){return Ue(t,"GET","/v1/projects",e)}),__.apply(this,arguments)}const j3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,H3=/^https?/;function m_(){return m_=y(function*(t){if(t.config.emulator)return;const{authorizedDomains:e}=yield U3(t);for(const n of e)try{if(W3(n))return}catch(r){}ht(t,"unauthorized-domain")}),m_.apply(this,arguments)}function W3(t){const e=ra(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return""===o.hostname&&""===r?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&o.hostname===r}if(!H3.test(n))return!1;if(j3.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const G3=new ia(3e4,6e4);function RT(){const t=ke().___jsl;if(null==t?void 0:t.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}let Xu=null;function z3(t){return Xu=Xu||function(t){return new Promise((e,n)=>{var r,i,s;function o(){RT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{RT(),n(Rn(t,"network-request-failed"))},timeout:G3.get()})}if(null===(i=null===(r=ke().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)e(gapi.iframes.getContext());else{if(!(null===(s=ke().gapi)||void 0===s?void 0:s.load)){const a=IT("iframefcb");return ke()[a]=()=>{gapi.load?o():n(Rn(t,"network-request-failed"))},function(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Rn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",function(){var t,e;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)})}(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}o()}}).catch(e=>{throw Xu=null,e})}(t),Xu}const Q3=new ia(5e3,15e3),J3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Z3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function X3(t){const e=t.config;I(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Tp(e,"emulator/auth/iframe"):`https://${t.config.authDomain}/__/auth/iframe`,r={apiKey:e.apiKey,appName:t.name,v:ta},i=Z3.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${ea(r).slice(1)}`}function y_(){return y_=y(function*(t){const e=yield z3(t),n=ke().gapi;return I(n,t,"internal-error"),e.open({where:document.body,url:X3(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:J3,dontclear:!0},r=>new Promise(function(){var i=y(function*(s,o){yield r.restyle({setHideOnLeave:!1});const a=Rn(t,"network-request-failed"),l=ke().setTimeout(()=>{o(a)},Q3.get());function u(){ke().clearTimeout(l),s(r)}r.ping(u).then(u,()=>{o(a)})});return function(s,o){return i.apply(this,arguments)}}()))}),y_.apply(this,arguments)}const t$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class PT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function MT(t,e,n,r,i,s){I(t.config.authDomain,t,"auth-domain-config-required"),I(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ta,eventId:i};if(e instanceof br){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Pu(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,u]of Object.entries(s||{}))o[l]=u}if(e instanceof SH){const l=e.getScopes().filter(u=>""!==u);l.length>0&&(o.scopes=l.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const l of Object.keys(a))void 0===a[l]&&delete a[l];return`${function({config:t}){return t.emulator?Tp(t,"emulator/auth/handler"):`https://${t.authDomain}/__/auth/handler`}(t)}?${ea(a).slice(1)}`}const v_="webStorageSupport",f$=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_T,this._completeRedirectFn=TT,this._overrideRedirectResult=x3}_openPopup(e,n,r,i){var s=this;return y(function*(){var o;Ir(null===(o=s.eventManagers[e._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()");const a=MT(e,n,r,ra(),i);return function(t,e,n,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},t$),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Ve().toLowerCase();n&&(a=Kw(u)?"_blank":n),Qw(u)&&(e=e||"http://localhost",l.scrollbars="yes");const c=Object.entries(l).reduce((f,[h,p])=>`${f}${h}=${p},`,"");if(function(t=Ve()){var e;return Hu(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(u)&&"_self"!==a)return function(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(e||"",a),new PT(null);const d=window.open(e||"",a,c);I(d,t,"popup-blocked");try{d.focus()}catch(f){}return new PT(d)}(e,a,Ug())})()}_openRedirect(e,n,r,i){var s=this;return y(function*(){return yield s._originValidation(e),function(t){ke().location.href=t}(MT(e,n,r,ra(),i)),new Promise(()=>{})})()}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Ir(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){var n=this;return y(function*(){const r=yield function(t){return y_.apply(this,arguments)}(e),i=new V3(e);return r.register("authEvent",s=>(I(null==s?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),n.eventManagers[e._key()]={manager:i},n.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(v_,{type:v_},i=>{var s;const o=null===(s=null==i?void 0:i[0])||void 0===s?void 0:s[v_];void 0!==o&&n(!!o),ht(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=function(t){return m_.apply(this,arguments)}(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return eT()||Bp()||Hu()}};var kT="@firebase/auth";class h${constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var n=this;return y(function*(){return n.assertAuthConfigured(),yield n.auth._initializationPromise,n.auth.currentUser?{accessToken:yield n.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((null==r?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);!n||(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){I(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const m$=gw("authIdTokenMaxAge")||300;let FT=null;const y$=t=>function(){var e=y(function*(n){const r=n&&(yield n.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>m$)return;const s=null==r?void 0:r.token;FT!==s&&(FT=s,yield fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))});return function(n){return e.apply(this,arguments)}}();function v$(t=Tw()){const e=Lu(t,"auth");if(e.isInitialized())return e.getImmediate();const n=function(t,e){const n=Lu(t,"auth");if(n.isInitialized()){const i=n.getImmediate();if(xu(n.getOptions(),null!=e?e:{}))return i;ht(i,"already-initialized")}return n.initialize({options:e})}(t,{popupRedirectResolver:f$,persistence:[u3,YH,_T]}),r=gw("authTokenSyncURL");if(r){const s=y$(r);(function(t,e,n){Ht(t).beforeAuthStateChanged(e,n)})(n,s,()=>s(n.currentUser)),function(t,e,n,r){Ht(t).onIdTokenChanged(o=>s(o),void 0,void 0)}(n)}const i=pw("auth");return i&&function(t,e,n){const r=pt(t);I(r._canInitEmulator,r,"emulator-config-failed"),I(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(null==n?void 0:n.disableWarnings),s=rT(e),{host:o,port:a}=function(t){const e=rT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:iT(r.substr(s.length+1))}}{const[s,o]=r.split(":");return{host:s,port:iT(o)}}}(e);r.config.emulator={url:`${s}//${o}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}()}(n,`http://${i}`),n}!function(t){bs(new oi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:s,authDomain:o}=r.options;return((a,l)=>{I(s&&!s.includes(":"),"invalid-api-key",{appName:a.name}),I(!(null==o?void 0:o.includes(":")),"argument-error",{appName:a.name});const u={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tT(t)},c=new oH(a,l,u);return function(t,e){const n=(null==e?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Zn);(null==e?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,null==e?void 0:e.popupRedirectResolver)}(c,n),c})(r,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),bs(new oi("auth-internal",e=>{const n=pt(e.getProvider("auth").getImmediate());return new h$(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Cr(kT,"0.21.3",void 0),Cr(kT,"0.21.3","esm2017")}("Browser");const LT="@firebase/database";let E_="";class C${constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){null==n?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Be(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return null==n?null:Xo(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class I${constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){null==n?delete this.cache_[e]:this.cache_[e]=n}get(e){return Nn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const BT=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new C$(e)}}catch(e){}return new I$},hi=BT("localStorage"),C_=BT("sessionStorage"),Ss=new dp("@firebase/database"),UT=function(){let t=1;return function(){return t++}}(),jT=function(t){const e=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,C(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),n=new CU;n.update(e);const r=n.digest();return ap.encodeByteArray(r)},pa=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=pa.apply(null,r):e+="object"==typeof r?Be(r):r,e+=" "}return e};let pi=null,HT=!0;const je=function(...t){if(!0===HT&&(HT=!1,null===pi&&!0===C_.get("logging_enabled")&&function(t,e){C(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(Ss.logLevel=ee.VERBOSE,pi=Ss.log.bind(Ss),e&&C_.set("logging_enabled",!0)):"function"==typeof t?pi=t:(pi=null,C_.remove("logging_enabled"))}(!0)),pi){const e=pa.apply(null,t);pi(e)}},ga=function(t){return function(...e){je(t,...e)}},I_=function(...t){const e="FIREBASE INTERNAL ERROR: "+pa(...t);Ss.error(e)},Mn=function(...t){const e=`FIREBASE FATAL ERROR: ${pa(...t)}`;throw Ss.error(e),new Error(e)},Je=function(...t){const e="FIREBASE WARNING: "+pa(...t);Ss.warn(e)},ec=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},wr="[MIN_NAME]",nr="[MAX_NAME]",gi=function(t,e){if(t===e)return 0;if(t===wr||e===nr)return-1;if(e===wr||t===nr)return 1;{const n=qT(t),r=qT(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1}},w$=function(t,e){return t===e?0:t<e?-1:1},_a=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Be(e))},D_=function(t){if("object"!=typeof t||null===t)return Be(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)0!==r&&(n+=","),n+=Be(e[r]),n+=":",n+=D_(t[e[r]]);return n+="}",n},WT=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function He(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const GT=function(t){C(!ec(t),"Invalid JSON number");const r=1023;let i,s,o,a,l;0===t?(s=0,o=0,i=1/t==-1/0?1:0):(i=t<0,(t=Math.abs(t))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(t/Math.pow(2,-1074))));const u=[];for(l=52;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(l=11;l;l-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();const c=u.join("");let d="";for(l=0;l<64;l+=8){let f=parseInt(c.substr(l,8),2).toString(16);1===f.length&&(f="0"+f),d+=f}return d.toLowerCase()},N$=new RegExp("^-?(0*)\\d{1,10}$"),qT=function(t){if(N$.test(t)){const e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},As=function(t){try{t()}catch(e){setTimeout(()=>{throw Je("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},ma=function(t,e){const n=setTimeout(t,e);return"number"==typeof n&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"==typeof n&&n.unref&&n.unref(),n};class x${constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=null==n?void 0:n.getImmediate({optional:!0}),this.appCheck||null==n||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;null===(n=this.appCheckProvider)||void 0===n||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Je(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class k${constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&"auth/token-not-initialized"===n.code?(je("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Je(e)}}let ya=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}return t.OWNER="owner",t})();const JT=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,e0="websocket",t0="long_polling";class w_{constructor(e,n,r,i,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=hi.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&hi.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function n0(t,e,n){let r;if(C("string"==typeof e,"typeof type must == string"),C("object"==typeof n,"typeof params must == object"),e===e0)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==t0)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);const i=[];return He(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}class F${constructor(){this.counters_={}}incrementCounter(e,n=1){Nn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return nU(this.counters_)}}const T_={},S_={};function A_(t){const e=t.toString();return T_[e]||(T_[e]=new F$),T_[e]}class V${constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&As(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Tr{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ga(e),this.stats_=A_(n),this.urlFn=l=>(this.appCheckToken&&(l.ac=this.appCheckToken),n0(n,t0,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new V$(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if("complete"===document.readyState)t();else{let e=!1;const n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new N_((...s)=>{const[o,a,l,u,c]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=l;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&JT.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Tr.forceAllow_=!0}static forceDisallow(){Tr.forceDisallow_=!0}static isAvailable(){return!(!Tr.forceAllow_&&(Tr.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Be(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=fw(n),i=WT(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Be(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class N_{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=UT(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=N_.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){je("frame writing exception"),a.stack&&je(a.stack),je(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||je("No IE domain setting required")}catch(n){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const o=this.pendingSegs.shift();r=r+"&seg"+i+"="+o.seg+"&ts"+i+"="+o.ts+"&d"+i+"="+o.d,i++}return n+=r,this.addLongPollTag_(n,this.currentSerial),!0}return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{je("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let nc=null;"undefined"!=typeof MozWebSocket?nc=MozWebSocket:"undefined"!=typeof WebSocket&&(nc=WebSocket);let Ns=(()=>{class t{constructor(n,r,i,s,o,a,l){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ga(this.connId),this.stats_=A_(r),this.connURL=t.connectionURL_(r,a,l,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){const a={v:"5"};return"undefined"!=typeof location&&location.hostname&&JT.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),s&&(a.ac=s),o&&(a.p=o),n0(n,e0,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,hi.set("previous_websocket_failure",!0);try{let i;0,this.mySock=new nc(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&null!==nc&&!t.forceDisallow_}static previouslyFailed(){return hi.isInMemoryStorage||!0===hi.get("previous_websocket_failure")}markConnectionHealthy(){hi.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=Xo(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(C(null===this.frames,"We already have a frame buffer"),n.length<=6){const r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(null===this.mySock)return;const r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();const r=Be(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=WT(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t})(),u0=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[Tr,Ns]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){const r=Ns&&Ns.isAvailable();let i=r&&!Ns.previouslyFailed();if(n.webSocketOnly&&(r||Je("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Ns];else{const s=this.transports_=[];for(const o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return t.globalTransportInitialized_=!1,t})();class _0{constructor(e,n,r,i,s,o,a,l,u,c){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ga("c:"+this.id+":"),this.transportManager_=new u0(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=ma(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const n=e.t;"a"===n?this.upgradeIfSecondaryHealthy_():"r"===n?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===n&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=_a("t",e),r=_a("d",e);if("c"===n)this.onSecondaryControl_(r);else{if("d"!==n)throw new Error("Unknown protocol layer: "+n);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=_a("t",e),r=_a("d",e);"c"===n?this.onControl_(r):"d"===n&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=_a("t",e);if("d"in e){const r=e.d;if("h"===n){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===n){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===n?this.onConnectionShutdown_(r):"r"===n?this.onReset_(r):"e"===n?I_("Server Error: "+r):"o"===n?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):I_("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),"5"!==r&&Je("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ma(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ma(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(hi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class m0{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}class y0{constructor(e){this.allowedEvents_=e,this.listeners_={},C(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){C(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}class rc extends y0{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!lp()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new rc}getInitialEvent(e){return C("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class X{constructor(e,n){if(void 0===n){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)""!==this.pieces_[n]&&(e+="/"+this.pieces_[n]);return e||"/"}}function K(){return new X("")}function j(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Sr(t){return t.pieces_.length-t.pieceNum_}function oe(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new X(t.pieces_,e)}function P_(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function va(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function C0(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new X(e,0)}function he(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof X)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new X(n,0)}function H(t){return t.pieceNum_>=t.pieces_.length}function lt(t,e){const n=j(t),r=j(e);if(null===n)return e;if(n===r)return lt(oe(t),oe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function o8(t,e){const n=va(t,0),r=va(e,0);for(let i=0;i<n.length&&i<r.length;i++){const s=gi(n[i],r[i]);if(0!==s)return s}return n.length===r.length?0:n.length<r.length?-1:1}function M_(t,e){if(Sr(t)!==Sr(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Wt(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Sr(t)>Sr(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class a8{constructor(e,n){this.errorPrefix_=n,this.parts_=va(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=ku(this.parts_[r]);I0(this)}}function I0(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+_i(t))}function _i(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}class x_ extends y0{constructor(){let e,n;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new x_}getInitialEvent(e){return C("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Ea=1e3;let sc,mi=(()=>{class t extends m0{constructor(n,r,i,s,o,a,l,u){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=u,this.id=t.nextPersistentConnectionId_++,this.log_=ga("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ea,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");x_.getInstance().on("visible",this.onVisible_,this),-1===n.host.indexOf("fblocal")&&rc.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){const s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(Be(o)),C(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();const r=new An,i={p:n._path.toString(),q:n._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:a=>{const l=a.d;"ok"===a.s?r.resolve(l):r.reject(l)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(n,r,i,s){this.initConnection_();const o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),C(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),C(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(n){const r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){const r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const o={p:i};n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest("q",o,l=>{const u=l.d,c=l.s;t.warnOnListenWarnings_(u,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",l),"ok"!==c&&this.removeListen_(i,s),n.onComplete&&n.onComplete(c,u))})}static warnOnListenWarnings_(n,r){if(n&&"object"==typeof n&&Nn(n,"w")){const i=Ds(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Je(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&40===n.length||function(t){const e=Ru(t).claims;return"object"==typeof e&&!0===e.admin}(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const n=this.authToken_,r=function(t){const n=Ru(t).claims;return!!n&&"object"==typeof n&&n.hasOwnProperty("iat")}(n)?"auth":"gauth",i={cred:n};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const o=s.s,a=s.d||"error";this.authToken_===n&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{const r=n.s,i=n.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){const i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),C(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);const o={p:n};s&&(o.q=i,o.t=s),this.sendRequest("n",o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){const o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();const a={p:r,d:i};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(n){const r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){const r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+Be(n));const r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),"d"===n?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===n?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===n?this.onListenRevoked_(r.p,r.q):"ac"===n?this.onAuthRevoked_(r.s,r.d):"apc"===n?this.onAppCheckRevoked_(r.s,r.d):"sd"===n?this.onSecurityDebugPacket_(r):I_("Unrecognized action received from server: "+Be(n)+"\nAre you using the latest client?")}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){C(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ea,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Ea,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ea),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const n=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var n=this;return y(function*(){if(n.shouldReconnect_()){n.log_("Making a connection attempt"),n.lastConnectionAttemptTime_=(new Date).getTime(),n.lastConnectionEstablishedTime_=null;const r=n.onDataMessage_.bind(n),i=n.onReady_.bind(n),s=n.onRealtimeDisconnect_.bind(n),o=n.id+":"+t.nextConnectionId_++,a=n.lastSessionId;let l=!1,u=null;const c=function(){u?u.close():(l=!0,s())};n.realtime_={close:c,sendRequest:function(h){C(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(h)}};const f=n.forceTokenRefresh_;n.forceTokenRefresh_=!1;try{const[h,p]=yield Promise.all([n.authTokenProvider_.getToken(f),n.appCheckTokenProvider_.getToken(f)]);l?je("getToken() completed but was canceled"):(je("getToken() completed. Creating connection."),n.authToken_=h&&h.accessToken,n.appCheckToken_=p&&p.token,u=new _0(o,n.repoInfo_,n.applicationId_,n.appCheckToken_,n.authToken_,r,i,s,_=>{Je(_+" ("+n.repoInfo_.toString()+")"),n.interrupt("server_kill")},a))}catch(h){n.log_("Failed to get token: "+h),l||(n.repoInfo_.nodeAdmin&&Je(h),c())}}})()}interrupt(n){je("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){je("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Pu(this.interruptReasons_)&&(this.reconnectDelay_=Ea,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){const r=n-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){const r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;i=r?r.map(o=>D_(o)).join("$"):"default";const s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){const i=new X(n).toString();let s;if(this.listens.has(i)){const o=this.listens.get(i);s=o.get(r),o.delete(r),0===o.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){je("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===n||"permission_denied"===n)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){je("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===n||"permission_denied"===n)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const n of this.listens.values())for(const r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){const n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){const n={};let r="js";n["sdk."+r+"."+E_.replace(/\./g,"-")]=1,lp()?n["framework.cordova"]=1:_w()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){const n=rc.getInstance().currentlyOnline();return Pu(this.interruptReasons_)&&n}}return t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t})();class W{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new W(e,n)}}class ic{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new W(wr,e),i=new W(wr,n);return 0!==this.compare(r,i)}minPost(){return W.MIN}}class w0 extends ic{static get __EMPTY_NODE(){return sc}static set __EMPTY_NODE(e){sc=e}compare(e,n){return gi(e.name,n.name)}isDefinedOn(e){throw Is("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return W.MIN}maxPost(){return new W(nr,sc)}makePost(e,n){return C("string"==typeof e,"KeyIndex indexValue must always be a string."),new W(e,sc)}toString(){return".key"}}const xn=new w0;class oc{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,i&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let n,e=this.nodeStack_.pop();if(n=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let O_,dn=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=null!=i?i:t.RED,this.left=null!=s?s:gt.EMPTY_NODE,this.right=null!=o?o:gt.EMPTY_NODE}copy(n,r,i,s,o){return new t(null!=n?n:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=s?s:this.left,null!=o?o:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this;const o=i(n,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(n,r,i),null):0===o?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return gt.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(n,i.key)){if(i.right.isEmpty())return gt.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){const n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){const n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){const n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){const n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})();class gt{constructor(e,n=gt.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new gt(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,dn.BLACK,null,null))}remove(e){return new gt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,dn.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),0===n)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),0===n){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}n<0?r=r.left:n>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new oc(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new oc(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new oc(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new oc(this.root_,null,this.comparator_,!0,e)}}function g8(t,e){return gi(t.name,e.name)}function k_(t,e){return gi(t,e)}gt.EMPTY_NODE=new class{copy(e,n,r,i,s){return this}insert(e,n,r){return new dn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const T0=function(t){return"number"==typeof t?"number:"+GT(t):"string:"+t},S0=function(t){if(t.isLeafNode()){const e=t.val();C("string"==typeof e||"number"==typeof e||"object"==typeof e&&Nn(e,".sv"),"Priority must be a string or number.")}else C(t===O_||t.isEmpty(),"priority of unexpected type.");C(t===O_||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let A0,N0,R0,Rs=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,C(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),S0(this.priorityNode_)}static set __childrenNodeConstructor(n){A0=n}static get __childrenNodeConstructor(){return A0}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return".priority"===n?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return H(n)?this:".priority"===j(n)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return".priority"===n?this.updatePriority(r):r.isEmpty()&&".priority"!==n?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){const i=j(n);return null===i?r:r.isEmpty()&&".priority"!==i?this:(C(".priority"!==i||1===Sr(n),".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(oe(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+T0(this.priorityNode_.val())+":");const r=typeof this.value_;n+=r+":",n+="number"===r?GT(this.value_):this.value_,this.lazyHash_=jT(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(C(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){const r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return C(s>=0,"Unknown leaf type: "+r),C(o>=0,"Unknown leaf type: "+i),s===o?"object"===i?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){const r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t})();const ue=new class extends ic{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return 0===s?gi(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return W.MIN}maxPost(){return new W(nr,new Rs("[PRIORITY-POST]",R0))}makePost(e,n){const r=N0(e);return new W(n,new Rs("[PRIORITY-POST]",r))}toString(){return".priority"}},E8=Math.log(2);class C8{constructor(e){this.count=parseInt(Math.log(e+1)/E8,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const ac=function(t,e,n,r){t.sort(e);const i=function(l,u){const c=u-l;let d,f;if(0===c)return null;if(1===c)return d=t[l],f=n?n(d):d,new dn(f,d.node,dn.BLACK,null,null);{const h=parseInt(c/2,10)+l,p=i(l,h),_=i(h+1,u);return d=t[h],f=n?n(d):d,new dn(f,d.node,dn.BLACK,p,_)}},a=function(l){let u=null,c=null,d=t.length;const f=function(p,_){const g=d-p,v=d;d-=p;const m=i(g+1,v),w=t[g],T=n?n(w):w;h(new dn(T,w.node,_,null,m))},h=function(p){u?(u.left=p,u=p):(c=p,u=p)};for(let p=0;p<l.count;++p){const _=l.nextBitIsOne(),g=Math.pow(2,l.count-(p+1));_?f(g,dn.BLACK):(f(g,dn.BLACK),f(g,dn.RED))}return c}(new C8(t.length));return new gt(r||e,a)};let F_;const Ps={};class rr{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return C(Ps&&ue,"ChildrenNode.ts has not been loaded"),F_=F_||new rr({".priority":Ps},{".priority":ue}),F_}get(e){const n=Ds(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof gt?n:null}hasIndex(e){return Nn(this.indexSet_,e.toString())}addIndex(e,n){C(e!==xn,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(W.Wrap);let a,o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();a=i?ac(r,e.getCompare()):Ps;const l=e.toString(),u=Object.assign({},this.indexSet_);u[l]=e;const c=Object.assign({},this.indexes_);return c[l]=a,new rr(c,u)}addToIndexes(e,n){const r=Mu(this.indexes_,(i,s)=>{const o=Ds(this.indexSet_,s);if(C(o,"Missing index implementation for "+s),i===Ps){if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(W.Wrap);let u=l.getNext();for(;u;)u.name!==e.name&&a.push(u),u=l.getNext();return a.push(e),ac(a,o.getCompare())}return Ps}{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new W(e.name,a))),l.insert(e,e.node)}});return new rr(r,this.indexSet_)}removeFromIndexes(e,n){const r=Mu(this.indexes_,i=>{if(i===Ps)return i;{const s=n.get(e.name);return s?i.remove(new W(e.name,s)):i}});return new rr(r,this.indexSet_)}}let Ca,F=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&S0(this.priorityNode_),this.children_.isEmpty()&&C(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ca||(Ca=new t(new gt(k_),null,rr.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ca}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(".priority"===n)return this.getPriority();{const r=this.children_.get(n);return null===r?Ca:r}}getChild(n){const r=j(n);return null===r?this:this.getImmediateChild(r).getChild(oe(n))}hasChild(n){return null!==this.children_.get(n)}updateImmediateChild(n,r){if(C(r,"We should always be passing snapshot nodes"),".priority"===n)return this.updatePriority(r);{const i=new W(n,r);let s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));const a=s.isEmpty()?Ca:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){const i=j(n);if(null===i)return r;{C(".priority"!==j(n)||1===Sr(n),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(oe(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;const r={};let i=0,s=0,o=!0;if(this.forEachChild(ue,(a,l)=>{r[a]=l.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){const a=[];for(const l in r)a[l]=r[l];return a}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let n="";this.getPriority().isEmpty()||(n+="priority:"+T0(this.getPriority().val())+":"),this.forEachChild(ue,(r,i)=>{const s=i.hash();""!==s&&(n+=":"+r+":"+s)}),this.lazyHash_=""===n?"":jT(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){const s=this.resolveIndex_(i);if(s){const o=s.getPredecessorKey(new W(n,r));return o?o.name:null}return this.children_.getPredecessorKey(n)}getFirstChildName(n){const r=this.resolveIndex_(n);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(n){const r=this.getFirstChildName(n);return r?new W(r,this.children_.get(r)):null}getLastChildName(n){const r=this.resolveIndex_(n);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(n){const r=this.getLastChildName(n);return r?new W(r,this.children_.get(r)):null}forEachChild(n,r){const i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{const s=this.children_.getIteratorFrom(n.name,W.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{const s=this.children_.getReverseIteratorFrom(n.name,W.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===Ia?-1:0}withIndex(n){if(n===xn||this.indexMap_.hasIndex(n))return this;{const r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===xn||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{const r=n;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(ue),s=r.getIterator(ue);let o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(n){return n===xn?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})();const Ia=new class extends F{constructor(){super(new gt(k_),F.EMPTY_NODE,rr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return F.EMPTY_NODE}isEmpty(){return!1}};function me(t,e=null){if(null===t)return F.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),C(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Rs(t,me(e));if(t instanceof Array){let n=F.EMPTY_NODE;return He(t,(r,i)=>{if(Nn(t,r)&&"."!==r.substring(0,1)){const s=me(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(me(e))}{const n=[];let r=!1;if(He(t,(o,a)=>{if("."!==o.substring(0,1)){const l=me(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new W(o,l)))}}),0===n.length)return F.EMPTY_NODE;const s=ac(n,g8,o=>o.name,k_);if(r){const o=ac(n,ue.getCompare());return new F(s,me(e),new rr({".priority":o},{".priority":ue}))}return new F(s,me(e),rr.Default)}}Object.defineProperties(W,{MIN:{value:new W(wr,F.EMPTY_NODE)},MAX:{value:new W(nr,Ia)}}),w0.__EMPTY_NODE=F.EMPTY_NODE,Rs.__childrenNodeConstructor=F,function(t){O_=t}(Ia),function(t){R0=t}(Ia),function(t){N0=t}(me);class L_ extends ic{constructor(e){super(),this.indexPath_=e,C(!H(e)&&".priority"!==j(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return 0===s?gi(e.name,n.name):s}makePost(e,n){const r=me(e),i=F.EMPTY_NODE.updateChild(this.indexPath_,r);return new W(n,i)}maxPost(){const e=F.EMPTY_NODE.updateChild(this.indexPath_,Ia);return new W(nr,e)}toString(){return va(this.indexPath_,0).join("/")}}const V_=new class extends ic{compare(e,n){const r=e.node.compareTo(n.node);return 0===r?gi(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return W.MIN}maxPost(){return W.MAX}makePost(e,n){const r=me(e);return new W(n,r)}toString(){return".value"}};function P0(t){return{type:"value",snapshotNode:t}}function Ms(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Da(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ba(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}class B_{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){C(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(null!=o&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Da(n,a)):C(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Ms(n,r)):o.trackChildChange(ba(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return null!=r&&(e.isLeafNode()||e.forEachChild(ue,(i,s)=>{n.hasChild(i)||r.trackChildChange(Da(i,s))}),n.isLeafNode()||n.forEachChild(ue,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(ba(i,s,o))}else r.trackChildChange(Ms(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?F.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class wa{constructor(e){this.indexedFilter_=new B_(e.getIndex()),this.index_=e.getIndex(),this.startPost_=wa.getStartPost_(e),this.endPost_=wa.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new W(n,r))||(r=F.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=F.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(F.EMPTY_NODE);const s=this;return n.forEachChild(ue,(o,a)=>{s.matches(new W(o,a))||(i=i.updateImmediateChild(o,F.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}return e.getIndex().maxPost()}}class T8{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new wa(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new W(n,r))||(r=F.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=F.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<n.numChildren()&&n.isIndexed(this.index_)){let s;i=F.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a)){if(!this.withinDirectionalEnd(a))break;i=i.updateImmediateChild(a.name,a.node),o++}}}else{let s;i=n.withIndex(this.index_),i=i.updatePriority(F.EMPTY_NODE),s=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,F.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(f,h)=>d(h,f)}else o=this.index_.getCompare();const a=e;C(a.numChildren()===this.limit_,"");const l=new W(n,r),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),c=this.rangedFilter_.matches(l);if(a.hasChild(n)){const d=a.getImmediateChild(n);let f=i.getChildAfterChild(this.index_,u,this.reverse_);for(;null!=f&&(f.name===n||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);const h=null==f?1:o(f,l);if(c&&!r.isEmpty()&&h>=0)return null!=s&&s.trackChildChange(ba(n,r,d)),a.updateImmediateChild(n,r);{null!=s&&s.trackChildChange(Da(n,d));const _=a.updateImmediateChild(n,F.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=s&&s.trackChildChange(Ms(f.name,f.node)),_.updateImmediateChild(f.name,f.node)):_}}return r.isEmpty()?e:c&&o(u,l)>=0?(null!=s&&(s.trackChildChange(Da(u.name,u.node)),s.trackChildChange(Ms(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(u.name,F.EMPTY_NODE)):e}}class U_{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ue}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return C(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return C(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:wr}hasEnd(){return this.endSet_}getIndexEndValue(){return C(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return C(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:nr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return C(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ue}copy(){const e=new U_;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function M0(t){const e={};if(t.isDefault())return e;let n;if(t.index_===ue?n="$priority":t.index_===V_?n="$value":t.index_===xn?n="$key":(C(t.index_ instanceof L_,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Be(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Be(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Be(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Be(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Be(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function x0(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==ue&&(e.i=t.index_.toString()),e}class uc extends m0{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=ga("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return void 0!==n?"tag$"+n:(C(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=uc.getListenId_(e,r),a={};this.listens_[o]=a;const l=M0(e._queryParams);this.restRequest_(s+".json",l,(u,c)=>{let d=c;if(404===u&&(d=null,u=null),null===u&&this.onDataUpdate_(s,d,!1,r),Ds(this.listens_,o)===a){let f;f=u?401===u?"permission_denied":"rest_error:"+u:"ok",i(f,null)}})}unlisten(e,n){const r=uc.getListenId_(e,n);delete this.listens_[r]}get(e){const n=M0(e._queryParams),r=e._path.toString(),i=new An;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ea(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Xo(a.responseText)}catch(u){Je("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else 401!==a.status&&404!==a.status&&Je("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}class M8{constructor(){this.rootNode_=F.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}function cc(){return{value:null,children:new Map}}function xs(t,e,n){if(H(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{const r=j(e);t.children.has(r)||t.children.set(r,cc()),xs(t.children.get(r),e=oe(e),n)}}function $_(t,e){if(H(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(ue,(r,i)=>{xs(t,new X(r),i)}),$_(t,e)}}if(t.children.size>0){const n=j(e);return e=oe(e),t.children.has(n)&&$_(t.children.get(n),e)&&t.children.delete(n),0===t.children.size}return!0}function W_(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach((n,r)=>{e(r,n)})}(t,(r,i)=>{W_(i,new X(e.toString()+"/"+r),n)})}class k8{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&He(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}class L8{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new k8(e);const r=1e4+2e4*Math.random();ma(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;He(e,(i,s)=>{s>0&&Nn(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),ma(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Gt=(()=>(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Gt||(Gt={})),Gt))();function z_(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}class dc{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Gt.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(H(this.path)){if(null!=this.affectedTree.value)return C(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new X(e));return new dc(K(),n,this.revert)}}return C(j(this.path)===e,"operationForChild called for unrelated child."),new dc(oe(this.path),this.affectedTree,this.revert)}}class Ta{constructor(e,n){this.source=e,this.path=n,this.type=Gt.LISTEN_COMPLETE}operationForChild(e){return H(this.path)?new Ta(this.source,K()):new Ta(this.source,oe(this.path))}}class yi{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Gt.OVERWRITE}operationForChild(e){return H(this.path)?new yi(this.source,K(),this.snap.getImmediateChild(e)):new yi(this.source,oe(this.path),this.snap)}}class ks{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Gt.MERGE}operationForChild(e){if(H(this.path)){const n=this.children.subtree(new X(e));return n.isEmpty()?null:n.value?new yi(this.source,K(),n.value):new ks(this.source,K(),n)}return C(j(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ks(this.source,oe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Ar{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(H(e))return this.isFullyInitialized()&&!this.filtered_;const n=j(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class V8{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Sa(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,l)=>function(t,e,n){if(null==e.childName||null==n.childName)throw Is("Should only compare child_ events.");const r=new W(e.childName,e.snapshotNode),i=new W(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,a,l)),o.forEach(a=>{const l=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,a,s);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(l,t.query_))})})}function fc(t,e){return{eventCache:t,serverCache:e}}function Aa(t,e,n,r){return fc(new Ar(e,n,r),t.serverCache)}function O0(t,e,n,r){return fc(t.eventCache,new Ar(e,n,r))}function hc(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function vi(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}let Q_;class ce{constructor(e,n=(()=>(Q_||(Q_=new gt(w$)),Q_))()){this.value=e,this.children=n}static fromObject(e){let n=new ce(null);return He(e,(r,i)=>{n=n.set(new X(r),i)}),n}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(null!=this.value&&n(this.value))return{path:K(),value:this.value};if(H(e))return null;{const r=j(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(oe(e),n);return null!=s?{path:he(new X(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(H(e))return this;{const n=j(e),r=this.children.get(n);return null!==r?r.subtree(oe(e)):new ce(null)}}set(e,n){if(H(e))return new ce(n,this.children);{const r=j(e),s=(this.children.get(r)||new ce(null)).set(oe(e),n),o=this.children.insert(r,s);return new ce(this.value,o)}}remove(e){if(H(e))return this.children.isEmpty()?new ce(null):new ce(null,this.children);{const n=j(e),r=this.children.get(n);if(r){const i=r.remove(oe(e));let s;return s=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&s.isEmpty()?new ce(null):new ce(this.value,s)}return this}}get(e){if(H(e))return this.value;{const n=j(e),r=this.children.get(n);return r?r.get(oe(e)):null}}setTree(e,n){if(H(e))return n;{const r=j(e),s=(this.children.get(r)||new ce(null)).setTree(oe(e),n);let o;return o=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new ce(this.value,o)}}fold(e){return this.fold_(K(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(he(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,K(),n)}findOnPath_(e,n,r){const i=!!this.value&&r(n,this.value);if(i)return i;if(H(e))return null;{const s=j(e),o=this.children.get(s);return o?o.findOnPath_(oe(e),he(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,K(),n)}foreachOnPath_(e,n,r){if(H(e))return this;{this.value&&r(n,this.value);const i=j(e),s=this.children.get(i);return s?s.foreachOnPath_(oe(e),he(n,i),r):new ce(null)}}foreach(e){this.foreach_(K(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(he(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}class fn{constructor(e){this.writeTree_=e}static empty(){return new fn(new ce(null))}}function Na(t,e,n){if(H(e))return new fn(new ce(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const o=lt(i,e);return s=s.updateChild(o,n),new fn(t.writeTree_.set(i,s))}{const i=new ce(n),s=t.writeTree_.setTree(e,i);return new fn(s)}}}function K_(t,e,n){let r=t;return He(n,(i,s)=>{r=Na(r,he(e,i),s)}),r}function F0(t,e){if(H(e))return fn.empty();{const n=t.writeTree_.setTree(e,new ce(null));return new fn(n)}}function Y_(t,e){return null!=Ei(t,e)}function Ei(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(lt(n.path,e)):null}function L0(t){const e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(ue,(r,i)=>{e.push(new W(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new W(r,i.value))}),e}function Nr(t,e){if(H(e))return t;{const n=Ei(t,e);return new fn(null!=n?new ce(n):t.writeTree_.subtree(e))}}function J_(t){return t.writeTree_.isEmpty()}function Os(t,e){return V0(K(),t.writeTree_,e)}function V0(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?(C(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):n=V0(he(t,i),s,n)}),!n.getChild(t).isEmpty()&&null!==r&&(n=n.updateChild(he(t,".priority"),r)),n}}function pc(t,e){return $0(e,t)}function z8(t,e){if(t.snap)return Wt(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Wt(he(t.path,n),e))return!0;return!1}function K8(t){return t.visible}function B0(t,e,n){let r=fn.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)Wt(n,o)?(a=lt(n,o),r=Na(r,a,s.snap)):Wt(o,n)&&(a=lt(o,n),r=Na(r,K(),s.snap.getChild(a)));else{if(!s.children)throw Is("WriteRecord should have .snap or .children");if(Wt(n,o))a=lt(n,o),r=K_(r,a,s.children);else if(Wt(o,n))if(a=lt(o,n),H(a))r=K_(r,K(),s.children);else{const l=Ds(s.children,j(a));if(l){const u=l.getChild(oe(a));r=Na(r,K(),u)}}}}}return r}function U0(t,e,n,r,i){if(r||i){const s=Nr(t.visibleWrites,e);return!i&&J_(s)?n:i||null!=n||Y_(s,K())?Os(B0(t.allWrites,function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(Wt(u.path,e)||Wt(e,u.path))},e),n||F.EMPTY_NODE):null}{const s=Ei(t.visibleWrites,e);if(null!=s)return s;{const o=Nr(t.visibleWrites,e);return J_(o)?n:null!=n||Y_(o,K())?Os(o,n||F.EMPTY_NODE):null}}}function gc(t,e,n,r){return U0(t.writeTree,t.treePath,e,n,r)}function Z_(t,e){return function(t,e,n){let r=F.EMPTY_NODE;const i=Ei(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ue,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=Nr(t.visibleWrites,e);return n.forEachChild(ue,(o,a)=>{const l=Os(Nr(s,new X(o)),a);r=r.updateImmediateChild(o,l)}),L0(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}return L0(Nr(t.visibleWrites,e)).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}(t.writeTree,t.treePath,e)}function j0(t,e,n,r){return function(t,e,n,r,i){C(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=he(e,n);if(Y_(t.visibleWrites,s))return null;{const o=Nr(t.visibleWrites,s);return J_(o)?i.getChild(n):Os(o,i.getChild(n))}}(t.writeTree,t.treePath,e,n,r)}function _c(t,e){return function(t,e){return Ei(t.visibleWrites,e)}(t.writeTree,he(t.treePath,e))}function X_(t,e,n){return function(t,e,n,r){const i=he(e,n),s=Ei(t.visibleWrites,i);return null!=s?s:r.isCompleteForChild(n)?Os(Nr(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function H0(t,e){return $0(he(t.treePath,e),t.writeTree)}function $0(t,e){return{treePath:t,writeTree:e}}class rW{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;C("child_added"===n||"child_changed"===n||"child_removed"===n,"Only child changes supported for tracking"),C(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===n&&"child_removed"===s)this.changeMap.set(r,ba(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===n&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===n&&"child_changed"===s)this.changeMap.set(r,Da(r,i.oldSnap));else if("child_changed"===n&&"child_added"===s)this.changeMap.set(r,Ms(r,e.snapshotNode));else{if("child_changed"!==n||"child_changed"!==s)throw Is("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,ba(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const W0=new class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}};class em{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Ar(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return X_(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:vi(this.viewCache_),s=function(t,e,n,r,i,s){return function(t,e,n,r,i,s,o){let a;const l=Nr(t.visibleWrites,e),u=Ei(l,K());if(null!=u)a=u;else{if(null==n)return[];a=Os(l,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const c=[],d=o.getCompare(),f=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let h=f.getNext();for(;h&&c.length<i;)0!==d(h,r)&&c.push(h),h=f.getNext();return c}}(t.writeTree,t.treePath,e,n,r,i,s)}(this.writes_,i,n,1,r,e);return 0===s.length?null:s[0]}}function G0(t,e,n,r,i,s){const o=e.eventCache;if(null!=_c(r,n))return e;{let a,l;if(H(n))if(C(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=vi(e),d=Z_(r,u instanceof F?u:F.EMPTY_NODE);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const u=gc(r,vi(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const u=j(n);if(".priority"===u){C(1===Sr(n),"Can't have a priority with additional path components");const c=o.getNode();l=e.serverCache.getNode();const d=j0(r,n,c,l);a=null!=d?t.filter.updatePriority(c,d):o.getNode()}else{const c=oe(n);let d;if(o.isCompleteForChild(u)){l=e.serverCache.getNode();const f=j0(r,n,o.getNode(),l);d=null!=f?o.getNode().getImmediateChild(u).updateChild(c,f):o.getNode().getImmediateChild(u)}else d=X_(r,u,e.serverCache);a=null!=d?t.filter.updateChild(o.getNode(),u,d,c,i,s):o.getNode()}}return Aa(e,a,o.isFullyInitialized()||H(n),t.filter.filtersNodes())}}function mc(t,e,n,r,i,s,o,a){const l=e.serverCache;let u;const c=o?t.filter:t.filter.getIndexedFilter();if(H(n))u=c.updateFullNode(l.getNode(),r,null);else if(c.filtersNodes()&&!l.isFiltered()){const h=l.getNode().updateChild(n,r);u=c.updateFullNode(l.getNode(),h,null)}else{const h=j(n);if(!l.isCompleteForPath(n)&&Sr(n)>1)return e;const p=oe(n),g=l.getNode().getImmediateChild(h).updateChild(p,r);u=".priority"===h?c.updatePriority(l.getNode(),g):c.updateChild(l.getNode(),h,g,p,W0,null)}const d=O0(e,u,l.isFullyInitialized()||H(n),c.filtersNodes());return G0(t,d,n,i,new em(i,d,s),a)}function tm(t,e,n,r,i,s,o){const a=e.eventCache;let l,u;const c=new em(i,e,s);if(H(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=Aa(e,u,!0,t.filter.filtersNodes());else{const d=j(n);if(".priority"===d)u=t.filter.updatePriority(e.eventCache.getNode(),r),l=Aa(e,u,a.isFullyInitialized(),a.isFiltered());else{const f=oe(n),h=a.getNode().getImmediateChild(d);let p;if(H(f))p=r;else{const _=c.getCompleteChild(d);p=null!=_?".priority"===P_(f)&&_.getChild(C0(f)).isEmpty()?_:_.updateChild(f,r):F.EMPTY_NODE}l=h.equals(p)?e:Aa(e,t.filter.updateChild(a.getNode(),d,p,f,c,o),a.isFullyInitialized(),t.filter.filtersNodes())}}return l}function q0(t,e){return t.eventCache.isCompleteForChild(e)}function z0(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function nm(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u,l=e;u=H(n)?r:new ce(null).setTree(n,r);const c=e.serverCache.getNode();return u.children.inorderTraversal((d,f)=>{if(c.hasChild(d)){const p=z0(0,e.serverCache.getNode().getImmediateChild(d),f);l=mc(t,l,new X(d),p,i,s,o,a)}}),u.children.inorderTraversal((d,f)=>{const h=!e.serverCache.isCompleteForChild(d)&&null===f.value;if(!c.hasChild(d)&&!h){const _=z0(0,e.serverCache.getNode().getImmediateChild(d),f);l=mc(t,l,new X(d),_,i,s,o,a)}}),l}class hW{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new B_(r.getIndex()),s=function(t){return t.loadsAllData()?new B_(t.getIndex()):t.hasLimit()?new T8(t):new wa(t)}(r);this.processor_=function(t){return{filter:t}}(s);const o=n.serverCache,a=n.eventCache,l=i.updateFullNode(F.EMPTY_NODE,o.getNode(),null),u=s.updateFullNode(F.EMPTY_NODE,a.getNode(),null),c=new Ar(l,o.isFullyInitialized(),i.filtersNodes()),d=new Ar(u,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=fc(d,c),this.eventGenerator_=new V8(this.query_)}get query(){return this.query_}}function _W(t,e){const n=vi(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!H(e)&&!n.getImmediateChild(j(e)).isEmpty())?n.getChild(e):null}function Q0(t){return 0===t.eventRegistrations_.length}function K0(t,e,n){const r=[];if(n){C(null==e,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(o.matches(e)){if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}else i.push(o)}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function Y0(t,e,n,r){e.type===Gt.MERGE&&null!==e.source.queryId&&(C(vi(t.viewCache_),"We should always have a full cache before handling merges"),C(hc(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=function(t,e,n,r,i){const s=new rW;let o,a;if(n.type===Gt.OVERWRITE){const u=n;u.source.fromUser?o=tm(t,e,u.path,u.snap,r,i,s):(C(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!H(u.path),o=mc(t,e,u.path,u.snap,r,i,a,s))}else if(n.type===Gt.MERGE){const u=n;u.source.fromUser?o=function(t,e,n,r,i,s,o){let a=e;return r.foreach((l,u)=>{const c=he(n,l);q0(e,j(c))&&(a=tm(t,a,c,u,i,s,o))}),r.foreach((l,u)=>{const c=he(n,l);q0(e,j(c))||(a=tm(t,a,c,u,i,s,o))}),a}(t,e,u.path,u.children,r,i,s):(C(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=nm(t,e,u.path,u.children,r,i,a,s))}else if(n.type===Gt.ACK_USER_WRITE){const u=n;o=u.revert?function(t,e,n,r,i,s){let o;if(null!=_c(r,n))return e;{const a=new em(r,e,i),l=e.eventCache.getNode();let u;if(H(n)||".priority"===j(n)){let c;if(e.serverCache.isFullyInitialized())c=gc(r,vi(e));else{const d=e.serverCache.getNode();C(d instanceof F,"serverChildren would be complete if leaf node"),c=Z_(r,d)}u=t.filter.updateFullNode(l,c,s)}else{const c=j(n);let d=X_(r,c,e.serverCache);null==d&&e.serverCache.isCompleteForChild(c)&&(d=l.getImmediateChild(c)),u=null!=d?t.filter.updateChild(l,c,d,oe(n),a,s):e.eventCache.getNode().hasChild(c)?t.filter.updateChild(l,c,F.EMPTY_NODE,oe(n),a,s):l,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=gc(r,vi(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=_c(r,K()),Aa(e,u,o,t.filter.filtersNodes())}}(t,e,u.path,r,i,s):function(t,e,n,r,i,s,o){if(null!=_c(i,n))return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(null!=r.value){if(H(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return mc(t,e,n,l.getNode().getChild(n),i,s,a,o);if(H(n)){let u=new ce(null);return l.getNode().forEachChild(xn,(c,d)=>{u=u.set(new X(c),d)}),nm(t,e,n,u,i,s,a,o)}return e}{let u=new ce(null);return r.foreach((c,d)=>{const f=he(n,c);l.isCompleteForPath(f)&&(u=u.set(c,l.getNode().getChild(f)))}),nm(t,e,n,u,i,s,a,o)}}(t,e,u.path,u.affectedTree,r,i,s)}else{if(n.type!==Gt.LISTEN_COMPLETE)throw Is("Unknown operation type: "+n.type);o=function(t,e,n,r,i){const s=e.serverCache;return G0(t,O0(e,s.getNode(),s.isFullyInitialized()||H(n),s.isFiltered()),n,r,W0,i)}(t,e,n.path,r,s)}const l=s.getChanges();return function(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=hc(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(P0(hc(e)))}}(e,o,l),{viewCache:o,changes:l}}(t.processor_,i,e,n,r);return function(t,e){C(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),C(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}(t.processor_,s.viewCache),C(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,J0(t,s.changes,s.viewCache.eventCache.getNode(),null)}function J0(t,e,n,r){return function(t,e,n,r){const i=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}(o.childName,o.snapshotNode))}),Sa(t,i,"child_removed",e,r,n),Sa(t,i,"child_added",e,r,n),Sa(t,i,"child_moved",s,r,n),Sa(t,i,"child_changed",e,r,n),Sa(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}let yc,Ec;class Z0{constructor(){this.views=new Map}}function rm(t,e,n,r){const i=e.source.queryId;if(null!==i){const s=t.views.get(i);return C(null!=s,"SyncTree gave us an op for an invalid query."),Y0(s,e,n,r)}{let s=[];for(const o of t.views.values())s=s.concat(Y0(o,e,n,r));return s}}function IW(t,e,n,r,i,s){const o=function(t,e,n,r,i){const o=t.views.get(e._queryIdentifier);if(!o){let a=gc(n,i?r:null),l=!1;a?l=!0:r instanceof F?(a=Z_(n,r),l=!1):(a=F.EMPTY_NODE,l=!1);const u=fc(new Ar(a,l,!1),new Ar(r,i,!1));return new hW(e,u)}return o}(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),function(t,e){t.eventRegistrations_.push(e)}(o,n),function(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ue,(s,o)=>{r.push(Ms(s,o))}),n.isFullyInitialized()&&r.push(P0(n.getNode())),J0(t,r,n.getNode(),e)}(o,n)}function eS(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Rr(t,e){let n=null;for(const r of t.views.values())n=n||_W(r,e);return n}function tS(t,e){return e._queryParams.loadsAllData()?vc(t):t.views.get(e._queryIdentifier)}function nS(t,e){return null!=tS(t,e)}function Pr(t){return null!=vc(t)}function vc(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let TW=1;class rS{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ce(null),this.pendingWriteTree_={visibleWrites:fn.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function im(t,e,n,r,i){return function(t,e,n,r,i){C(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Na(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?Fs(t,new yi({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Mr(t,e,n=!1){const r=function(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);C(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&z8(a,r.path)?i=!1:Wt(r.path,a.path)&&(s=!0)),o--}return!!i&&(s?(function(t){t.visibleWrites=B0(t.allWrites,K8,K()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=F0(t.visibleWrites,r.path):He(r.children,l=>{t.visibleWrites=F0(t.visibleWrites,he(r.path,l))}),!0))}(t.pendingWriteTree_,e)){let s=new ce(null);return null!=r.snap?s=s.set(K(),!0):He(r.children,o=>{s=s.set(new X(o),!0)}),Fs(t,new dc(r.path,s,n))}return[]}function Ra(t,e,n){return Fs(t,new yi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Cc(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let a=[];if(o&&("default"===e._queryIdentifier||nS(o,e))){const l=function(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const a=Pr(t);if("default"===i)for(const[l,u]of t.views.entries())o=o.concat(K0(u,n,r)),Q0(u)&&(t.views.delete(l),u.query._queryParams.loadsAllData()||s.push(u.query));else{const l=t.views.get(i);l&&(o=o.concat(K0(l,n,r)),Q0(l)&&(t.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!Pr(t)&&s.push(new(C(yc,"Reference.ts has not been loaded"),yc)(e._repo,e._path)),{removed:s,events:o}}(o,e,n,r);(function(t){return 0===t.views.size})(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const u=l.removed;if(a=l.events,!i){const c=-1!==u.findIndex(f=>f._queryParams.loadsAllData()),d=t.syncPointTree_.findOnPath(s,(f,h)=>Pr(h));if(c&&!d){const f=t.syncPointTree_.subtree(s);if(!f.isEmpty()){const h=function(t){return t.fold((e,n,r)=>{if(n&&Pr(n))return[vc(n)];{let i=[];return n&&(i=eS(n)),He(r,(s,o)=>{i=i.concat(o)}),i}})}(f);for(let p=0;p<h.length;++p){const _=h[p],g=_.query,v=aS(t,_);t.listenProvider_.startListening(Ma(g),Pa(t,g),v.hashFn,v.onComplete)}}}if(!d&&u.length>0&&!r)if(c){const f=null;t.listenProvider_.stopListening(Ma(e),f)}else u.forEach(f=>{const h=t.queryToTagMap.get(Dc(f));t.listenProvider_.stopListening(Ma(f),h)})}!function(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=Dc(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}(t,u)}return a}function sm(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(f,h)=>{const p=lt(f,i);s=s||Rr(h,p),o=o||Pr(h)});let l,a=t.syncPointTree_.get(i);a?(o=o||Pr(a),s=s||Rr(a,K())):(a=new Z0,t.syncPointTree_=t.syncPointTree_.set(i,a)),null!=s?l=!0:(l=!1,s=F.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((h,p)=>{const _=Rr(p,K());_&&(s=s.updateImmediateChild(h,_))}));const u=nS(a,e);if(!u&&!e._queryParams.loadsAllData()){const f=Dc(e);C(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");const h=TW++;t.queryToTagMap.set(f,h),t.tagToQueryMap.set(h,f)}let d=IW(a,e,n,pc(t.pendingWriteTree_,i),s,l);if(!u&&!o&&!r){const f=tS(a,e);d=d.concat(function(t,e,n){const r=e._path,i=Pa(t,e),s=aS(t,n),o=t.listenProvider_.startListening(Ma(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)C(!Pr(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((u,c,d)=>{if(!H(u)&&c&&Pr(c))return[vc(c).query];{let f=[];return c&&(f=f.concat(eS(c).map(h=>h.query))),He(d,(h,p)=>{f=f.concat(p)}),f}});for(let u=0;u<l.length;++u){const c=l[u];t.listenProvider_.stopListening(Ma(c),Pa(t,c))}}return o}(t,e,f))}return d}function Ic(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const u=Rr(a,lt(o,e));if(u)return u});return U0(i,e,s,n,!0)}function Fs(t,e){return sS(e,t.syncPointTree_,null,pc(t.pendingWriteTree_,K()))}function sS(t,e,n,r){if(H(t.path))return oS(t,e,n,r);{const i=e.get(K());null==n&&null!=i&&(n=Rr(i,K()));let s=[];const o=j(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const u=n?n.getImmediateChild(o):null,c=H0(r,o);s=s.concat(sS(a,l,u,c))}return i&&(s=s.concat(rm(i,t,r,n))),s}}function oS(t,e,n,r){const i=e.get(K());null==n&&null!=i&&(n=Rr(i,K()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,u=H0(r,o),c=t.operationForChild(o);c&&(s=s.concat(oS(c,a,l,u)))}),i&&(s=s.concat(rm(i,t,r,n))),s}function aS(t,e){const n=e.query,r=Pa(t,n);return{hashFn:()=>(function(t){return t.viewCache_.serverCache.getNode()}(e)||F.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function(t,e,n){const r=om(t,n);if(r){const i=am(r),s=i.path,o=i.queryId,a=lt(s,e);return lm(t,s,new Ta(z_(o),a))}return[]}(t,n._path,r):function(t,e){return Fs(t,new Ta({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);{const s=function(t,e){let n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(i,n);return Cc(t,n,null,s)}}}}function Pa(t,e){const n=Dc(e);return t.queryToTagMap.get(n)}function Dc(t){return t._path.toString()+"$"+t._queryIdentifier}function om(t,e){return t.tagToQueryMap.get(e)}function am(t){const e=t.indexOf("$");return C(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new X(t.substr(0,e))}}function lm(t,e,n){const r=t.syncPointTree_.get(e);return C(r,"Missing sync point for query tag that we're tracking"),rm(r,n,pc(t.pendingWriteTree_,e),null)}function Ma(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(C(Ec,"Reference.ts has not been loaded"),Ec)(t._repo,t._path):t}class um{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new um(n)}node(){return this.node_}}class cm{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=he(this.path_,e);return new cm(this.syncTree_,n)}node(){return Ic(this.syncTree_,this.path_)}}const lS=function(t,e,n){return t&&"object"==typeof t?(C(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?VW(t[".sv"],e,n):"object"==typeof t[".sv"]?BW(t[".sv"],e):void C(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},VW=function(t,e,n){if("timestamp"===t)return n.timestamp;C(!1,"Unexpected server value: "+t)},BW=function(t,e,n){t.hasOwnProperty("increment")||C(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;"number"!=typeof r&&C(!1,"Unexpected increment value: "+r);const i=e.node();if(C(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!=typeof o?r:o+r},dm=function(t,e,n){return fm(t,new um(e),n)};function fm(t,e,n){const r=t.getPriority().val(),i=lS(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=lS(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Rs(a,me(i)):t}{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Rs(i))),o.forEachChild(ue,(a,l)=>{const u=fm(l,e.getImmediateChild(a),n);u!==l&&(s=s.updateImmediateChild(a,u))}),s}}class hm{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function bc(t,e){let n=e instanceof X?e:new X(e),r=t,i=j(n);for(;null!==i;){const s=Ds(r.node.children,i)||{children:{},childCount:0};r=new hm(i,r,s),n=oe(n),i=j(n)}return r}function Ci(t){return t.node.value}function pm(t,e){t.node.value=e,gm(t)}function cS(t){return t.node.childCount>0}function wc(t,e){He(t.node.children,(n,r)=>{e(new hm(n,t,r))})}function dS(t,e,n,r){n&&!r&&e(t),wc(t,i=>{dS(i,e,!0,r)}),n&&r&&e(t)}function xa(t){return new X(null===t.parent?t.name:xa(t.parent)+"/"+t.name)}function gm(t){null!==t.parent&&function(t,e,n){const r=function(t){return void 0===Ci(t)&&!cS(t)}(n),i=Nn(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,gm(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,gm(t))}(t.parent,t.name,t)}const $W=/[\[\].#$\/\u0000-\u001F\u007F]/,WW=/[\[\].#$\u0000-\u001F\u007F]/,_m=10485760,Tc=function(t){return"string"==typeof t&&0!==t.length&&!$W.test(t)},fS=function(t){return"string"==typeof t&&0!==t.length&&!WW.test(t)},ka=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!ec(t)||t&&"object"==typeof t&&Nn(t,".sv")},kn=function(t,e,n,r){r&&void 0===e||Oa(Yn(t,"value"),e,n)},Oa=function(t,e,n){const r=n instanceof X?new a8(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+_i(r));if("function"==typeof e)throw new Error(t+"contains a function "+_i(r)+" with contents = "+e.toString());if(ec(e))throw new Error(t+"contains "+e.toString()+" "+_i(r));if("string"==typeof e&&e.length>_m/3&&ku(e)>_m)throw new Error(t+"contains a string greater than "+_m+" utf8 bytes "+_i(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(He(e,(o,a)=>{if(".value"===o)i=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!Tc(o)))throw new Error(t+" contains an invalid key ("+o+") "+_i(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=ku(e),I0(t)})(r,o),Oa(t,a,r),function(t){const e=t.parts_.pop();t.byteLength_-=ku(e),t.parts_.length>0&&(t.byteLength_-=1)}(r)}),i&&s)throw new Error(t+' contains ".value" child '+_i(r)+" in addition to actual children.")}},ym=function(t,e,n,r){if(!(r&&void 0===n||fS(n)))throw new Error(Yn(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},On=function(t,e){if(".info"===j(e))throw new Error(t+" failed = Can't modify data under /.info/")};class QW{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Sc(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==n&&!M_(s,n.path)&&(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function gS(t,e,n){Sc(t,n),_S(t,r=>M_(r,e))}function At(t,e,n){Sc(t,n),_S(t,r=>Wt(r,e)||Wt(e,r))}function _S(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];i&&(e(i.path)?(KW(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function KW(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(null!==n){t.events[e]=null;const r=n.getEventRunner();pi&&je("event: "+n.toString()),As(r)}}}class JW{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new QW,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=cc(),this.transactionQueueTree_=new hm,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function yS(t){const n=t.infoData_.getNode(new X(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+n}function La(t){return function(t){return(t=t||{}).timestamp=t.timestamp||(new Date).getTime(),t}({timestamp:yS(t)})}function vS(t,e,n,r,i){t.dataUpdateCount++;const s=new X(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const l=Mu(n,u=>me(u));o=function(t,e,n,r){const i=om(t,r);if(i){const s=am(i),o=s.path,a=s.queryId,l=lt(o,e),u=ce.fromObject(n);return lm(t,o,new ks(z_(a),l,u))}return[]}(t.serverSyncTree_,s,l,i)}else{const l=me(n);o=function(t,e,n,r){const i=om(t,r);if(null!=i){const s=am(i),o=s.path,a=s.queryId,l=lt(o,e);return lm(t,o,new yi(z_(a),l,n))}return[]}(t.serverSyncTree_,s,l,i)}else if(r){const l=Mu(n,u=>me(u));o=function(t,e,n){const r=ce.fromObject(n);return Fs(t,new ks({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,l)}else{const l=me(n);o=Ra(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=Vs(t,s)),At(t.eventQueue_,a,o)}function ES(t,e){vm(t,"connected",e),!1===e&&function(t){Ls(t,"onDisconnectEvents");const e=La(t),n=cc();W_(t.onDisconnect_,K(),(i,s)=>{const o=function(t,e,n,r){return fm(e,new cm(n,t),r)}(i,s,t.serverSyncTree_,e);xs(n,i,o)});let r=[];W_(n,K(),(i,s)=>{r=r.concat(Ra(t.serverSyncTree_,i,s));const o=Dm(t,i);Vs(t,o)}),t.onDisconnect_=cc(),At(t.eventQueue_,K(),r)}(t)}function vm(t,e,n){const r=new X("/.info/"+e),i=me(n);t.infoData_.updateSnapshot(r,i);const s=Ra(t.infoSyncTree_,r,i);At(t.eventQueue_,r,s)}function Ac(t){return t.nextWriteId_++}function rG(t,e,n){t.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&$_(t.onDisconnect_,e),xr(0,n,r,i)})}function CS(t,e,n,r){const i=me(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(s,o)=>{"ok"===s&&xs(t.onDisconnect_,e,i),xr(0,r,s,o)})}function Cm(t,e,n){let r;r=".info"===j(e._path)?Cc(t.infoSyncTree_,e,n):Cc(t.serverSyncTree_,e,n),gS(t.eventQueue_,e._path,r)}function Ls(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),je(n,...e)}function xr(t,e,n,r){e&&As(()=>{if("ok"===n)e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function Im(t,e,n){return Ic(t.serverSyncTree_,e,n)||F.EMPTY_NODE}function Nc(t,e=t.transactionQueueTree_){if(e||Rc(t,e),Ci(e)){const n=bS(t,e);C(n.length>0,"Sending zero length transaction queue"),n.every(i=>0===i.status)&&function(t,e,n){const r=n.map(u=>u.currentWriteId),i=Im(t,e,r);let s=i;const o=i.hash();for(let u=0;u<n.length;u++){const c=n[u];C(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;const d=lt(e,c.path);s=s.updateChild(d,c.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,u=>{Ls(t,"transaction put response",{path:l.toString(),status:u});let c=[];if("ok"===u){const d=[];for(let f=0;f<n.length;f++)n[f].status=2,c=c.concat(Mr(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();Rc(t,bc(t.transactionQueueTree_,e)),Nc(t,t.transactionQueueTree_),At(t.eventQueue_,e,c);for(let f=0;f<d.length;f++)As(d[f])}else{if("datastale"===u)for(let d=0;d<n.length;d++)n[d].status=3===n[d].status?4:0;else{Je("transaction at "+l.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}Vs(t,e)}},o)}(t,xa(e),n)}else cS(e)&&wc(e,n=>{Nc(t,n)})}function Vs(t,e){const n=DS(t,e),r=xa(n);return function(t,e,n){if(0===e.length)return;const r=[];let i=[];const o=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],u=lt(n,l.path);let d,c=!1;if(C(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)c=!0,d=l.abortReason,i=i.concat(Mr(t.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=25)c=!0,d="maxretry",i=i.concat(Mr(t.serverSyncTree_,l.currentWriteId,!0));else{const f=Im(t,l.path,o);l.currentInputSnapshot=f;const h=e[a].update(f.val());if(void 0!==h){Oa("transaction failed: Data returned ",h,l.path);let p=me(h);"object"==typeof h&&null!=h&&Nn(h,".priority")||(p=p.updatePriority(f.getPriority()));const g=l.currentWriteId,v=La(t),m=dm(p,f,v);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=m,l.currentWriteId=Ac(t),o.splice(o.indexOf(g),1),i=i.concat(im(t.serverSyncTree_,l.path,m,l.currentWriteId,l.applyLocally)),i=i.concat(Mr(t.serverSyncTree_,g,!0))}else c=!0,d="nodata",i=i.concat(Mr(t.serverSyncTree_,l.currentWriteId,!0))}At(t.eventQueue_,n,i),i=[],c&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===d?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(d),!1,null)))}Rc(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)As(r[a]);Nc(t,t.transactionQueueTree_)}(t,bS(t,n),r),r}function DS(t,e){let n,r=t.transactionQueueTree_;for(n=j(e);null!==n&&void 0===Ci(r);)r=bc(r,n),n=j(e=oe(e));return r}function bS(t,e){const n=[];return wS(t,e,n),n.sort((r,i)=>r.order-i.order),n}function wS(t,e,n){const r=Ci(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);wc(e,i=>{wS(t,i,n)})}function Rc(t,e){const n=Ci(e);if(n){let r=0;for(let i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,pm(e,n.length>0?n:void 0)}wc(e,r=>{Rc(t,r)})}function Dm(t,e){const n=xa(DS(t,e)),r=bc(t.transactionQueueTree_,e);return function(t,e,n){let r=t.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{bm(t,i)}),bm(t,r),dS(r,i=>{bm(t,i)}),n}function bm(t,e){const n=Ci(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(C(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(C(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Mr(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?pm(e,void 0):n.length=s+1,At(t.eventQueue_,xa(e),i);for(let o=0;o<r.length;o++)As(r[o])}}const wm=function(t,e){const n=hG(t),r=n.namespace;return"firebase.com"===n.domain&&Mn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==n.domain&&Mn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Je("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new w_(n.host,n.secure,r,"ws"===n.scheme||"wss"===n.scheme,e,"",r!==n.subdomain),path:new X(n.pathString)}},hG=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if("string"==typeof t){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let c=t.indexOf("/");-1===c&&(c=t.length);let d=t.indexOf("?");-1===d&&(d=t.length),e=t.substring(0,Math.min(c,d)),c<d&&(i=function(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(s){}e+="/"+i}return e}(t.substring(c,d)));const f=function(t){const e={};"?"===t.charAt(0)&&(t=t.substring(1));for(const n of t.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Je(`Invalid query segment '${n}' in query '${t}'`)}return e}(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(o="https"===a||"wss"===a,l=parseInt(e.substring(u+1),10)):u=e.length;const h=e.slice(0,u);if("localhost"===h.toLowerCase())n="localhost";else if(h.split(".").length<=2)n=h;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};class SS{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Be(this.snapshot.exportVal())}}class AS{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Tm{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return C(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class gG{constructor(e,n){this._repo=e,this._path=n}cancel(){const e=new An;return rG(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){On("OnDisconnect.remove",this._path);const e=new An;return CS(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){On("OnDisconnect.set",this._path),kn("OnDisconnect.set",e,this._path,!1);const n=new An;return CS(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){On("OnDisconnect.setWithPriority",this._path),kn("OnDisconnect.setWithPriority",e,this._path,!1),function(t,e,n){if(!n||void 0!==e){if(ec(e))throw new Error(Yn(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ka(e))throw new Error(Yn(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}}("OnDisconnect.setWithPriority",n,!1);const r=new An;return function(t,e,n,r,i){const s=me(n,r);t.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{"ok"===o&&xs(t.onDisconnect_,e,s),xr(0,i,o,a)})}(this._repo,this._path,e,n,r.wrapCallback(()=>{})),r.promise}update(e){On("OnDisconnect.update",this._path),function(t,e,n,r){if(r&&void 0===e)return;const i=Yn(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];He(e,(o,a)=>{const l=new X(o);if(Oa(i,a,he(n,l)),".priority"===P_(l)&&!ka(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const s=va(r);for(let o=0;o<s.length;o++)if((".priority"!==s[o]||o!==s.length-1)&&!Tc(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(o8);let i=null;for(n=0;n<e.length;n++){if(r=e[n],null!==i&&Wt(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)}("OnDisconnect.update",e,this._path,!1);const n=new An;return function(t,e,n,r){if(Pu(n))return je("onDisconnect().update() called with empty data.  Don't do anything."),void xr(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,(i,s)=>{"ok"===i&&He(n,(o,a)=>{const l=me(a);xs(t.onDisconnect_,he(e,o),l)}),xr(0,r,i,s)})}(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}}class Nt{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return H(this._path)?null:P_(this._path)}get ref(){return new hn(this._repo,this._path)}get _queryIdentifier(){const e=x0(this._queryParams),n=D_(e);return"{}"===n?"default":n}get _queryObject(){return x0(this._queryParams)}isEqual(e){if(!((e=Ht(e))instanceof Nt))return!1;const n=this._repo===e._repo,r=M_(this._path,e._path);return n&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)}}class hn extends Nt{constructor(e,n){super(e,n,new U_,!1)}get parent(){const e=C0(this._path);return null===e?null:new hn(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Ii{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new X(e),r=Bs(this.ref,e);return new Ii(this._node.getChild(n),r,ue)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Ii(i,Bs(this.ref,r),ue)))}hasChild(e){const n=new X(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function xc(t,e){return(t=Ht(t))._checkNotDeleted("ref"),void 0!==e?Bs(t._root,e):t._root}function Bs(t,e){return null===j((t=Ht(t))._path)?(n=e,n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ym("child","path",n,!1)):ym("child","path",e,!1),new hn(t._repo,he(t._path,e));var n}function Us(t,e){t=Ht(t),On("set",t._path),kn("set",e,t._path,!1);const n=new An;return function(t,e,n,r,i){Ls(t,"set",{path:e.toString(),value:n,priority:r});const s=La(t),o=me(n,r),a=Ic(t.serverSyncTree_,e),l=dm(o,a,s),u=Ac(t),c=im(t.serverSyncTree_,e,l,u,!0);Sc(t.eventQueue_,c),t.server_.put(e.toString(),o.val(!0),(f,h)=>{const p="ok"===f;p||Je("set at "+e+" failed: "+f);const _=Mr(t.serverSyncTree_,u,!p);At(t.eventQueue_,e,_),xr(0,i,f,h)});const d=Dm(t,e);Vs(t,d),At(t.eventQueue_,d,[])}(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}class Va{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,n){const r=n._queryParams.getIndex();return new SS("value",this,new Ii(e.snapshotNode,new hn(n._repo,n._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new AS(this,e,n):null}matches(e){return e instanceof Va&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class kc{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n="children_added"===e?"child_added":e;return n="children_removed"===n?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new AS(this,e,n):null}createEvent(e,n){C(null!=e.childName,"Child events should have a childName.");const r=Bs(new hn(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new SS(e.type,this,new Ii(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof kc&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Ba(t,e,n,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const l=n,u=(c,d)=>{Cm(t._repo,t,a),l(c,d)};u.userCallback=n.userCallback,u.context=n.context,n=u}const o=new Tm(n,s||void 0),a="value"===e?new Va(o):new kc(e,o);return function(t,e,n){let r;r=".info"===j(e._path)?sm(t.infoSyncTree_,e,n):sm(t.serverSyncTree_,e,n),gS(t.eventQueue_,e._path,r)}(t._repo,t,a),()=>Cm(t._repo,t,a)}(function(t){C(!yc,"__referenceConstructor has already been defined"),yc=t})(hn),function(t){C(!Ec,"__referenceConstructor has already been defined"),Ec=t}(hn);const Sm={};function NG(t,e,n,r,i){let s=r||t.options.databaseURL;void 0===s&&(t.options.projectId||Mn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),je("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let l,u,o=wm(s,i),a=o.repoInfo;"undefined"!=typeof process&&process.env&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(l=!0,s=`http://${u}?ns=${a.namespace}`,o=wm(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const c=i&&l?new ya(ya.OWNER):new k$(t.name,t.options,e);(function(t,e){const n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Tc(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),fS(t)}(n))throw new Error(Yn(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",o),H(o.path)||Mn("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function(t,e,n,r){let i=Sm[e.name];i||(i={},Sm[e.name]=i);let s=i[t.toURLString()];return s&&Mn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new JW(t,false,n,r),i[t.toURLString()]=s,s}(a,t,c,new x$(t.name,n));return new xG(d,t)}class xG{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(t,e,n){if(t.stats_=A_(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new uc(t.repoInfo_,(r,i,s,o)=>{vS(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>ES(t,!0),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Be(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new mi(t.repoInfo_,e,(r,i,s,o)=>{vS(t,r,i,s,o)},r=>{ES(t,r)},r=>{!function(t,e){He(e,(n,r)=>{vm(t,n,r)})}(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=function(t,e){const n=t.toString();return S_[n]||(S_[n]=e()),S_[n]}(t.repoInfo_,()=>new L8(t.stats_,t.server_)),t.infoData_=new M8,t.infoSyncTree_=new rS({startListening:(r,i,s,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=Ra(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),vm(t,"connected",!1),t.serverSyncTree_=new rS({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,l)=>{const u=o(a,l);At(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new hn(this._repo,K())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(t,e){const n=Sm[e];(!n||n[t.key]!==t)&&Mn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),function(t){t.persistentConnection_&&t.persistentConnection_.interrupt("repo_interrupt")}(t),delete n[t.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Mn("Cannot call "+e+" on a deleted database.")}}mi.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},mi.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)},E_="9.17.1",bs(new oi("database",(e,{instanceIdentifier:n})=>NG(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n),"PUBLIC").setMultipleInstances(!0)),Cr(LT,"0.14.3",void 0),Cr(LT,"0.14.3","esm2017"),Cr("firebase","9.17.1","app");const jG=function(t,e){return{border:t,"background-color":e}};function HG(t,e){if(1&t){const n=E();Tt(0,"span",2),Ol("click",function(){const i=function(t){return P.lFrame.contextLView=t,t[8]}(n),s=i.$implicit,o=i.index,a=Fl().index;return Fl().onPieceClick(s,a,o)}),St()}if(2&t){const n=e.$implicit,r=Fl(2);Jr("ngStyle",vD(1,jG,r.clickedCurrentPos?"2px dotted green":"2px dotted red",-1===n?"red":1===n?"black":-3===n?"darkred":3===n?"grey":"white"))}}function $G(t,e){if(1&t&&(Tt(0,"p"),Ef(1,HG,1,4,"span",5),St()),2&t){const n=e.$implicit;In(1),Jr("ngForOf",n)}}const kS=function(t){return{color:t}};let WG=(()=>{class t{constructor(){this.firebaseConfig={apiKey:"AIzaSyBnquCoqFk-MJaztibTp7mR_rIcluUGYyg",authDomain:"checkers-game-b8ae8.firebaseapp.com",databaseURL:"https://checkers-game-b8ae8-default-rtdb.firebaseio.com",projectId:"checkers-game-b8ae8",storageBucket:"checkers-game-b8ae8.appspot.com",messagingSenderId:"720412773634",appId:"1:720412773634:web:d099693bb05864eb6c861b"},this.title="CheckersGame",this.board=[[0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[-1,0,-1,0,-1,0,-1,0],[0,-1,0,-1,0,-1,0,-1],[-1,0,-1,0,-1,0,-1,0]],this.clickedCurrentPos=null,this.clickedNewPos=null,this.playerTurn="black",this.redCheckersRemaining=[],this.blackCheckersRemaining=[],this.userId="";const n=ww(this.firebaseConfig);this.auth=v$(n),function(t){return sg.apply(this,arguments)}(this.auth).catch(i=>{console.log(i.code,i.message)}),this.database=function(t=Tw(),e){const n=Lu(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=(t=>{const e=pw("database");if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),r]:[e.substring(0,n),r]})();r&&function(t,e,n,r={}){(t=Ht(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&Mn("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Mn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new ya(ya.OWNER);else if(r.mockUserToken){const o="string"==typeof r.mockUserToken?r.mockUserToken:function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Su(JSON.stringify({alg:"none",type:"JWT"})),Su(JSON.stringify(o)),""].join(".")}(r.mockUserToken,t.app.options.projectId);s=new ya(o)}!function(t,e,n,r){t.repoInfo_=new w_(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}(i,e,n,s)}(n,...r)}return n}(n);const r=xc(this.database,"users");this.boardRef=xc(this.database,"board"),function(t,e,n,r){Ba(t,"value",e,n,r)}(this.boardRef,i=>{console.log("snapshot: ",i.val()),this.board=i.val().board,this.playerTurn=i.val().team}),function(t,e,n,r){Ba(t,"child_added",i=>{const s=i.val();console.log("addedPlayer:",s)},void 0,void 0)}(r)}ngOnInit(){this.usersColor=prompt("Choose color; red or black?"),this.auth.onAuthStateChanged(n=>{console.log("logged in user",n),n&&(this.userId=n.uid,this.userRef=xc(this.database,`users/${this.userId}`),Us(this.userRef,{id:this.userId}),Us(this.boardRef,{team:this.playerTurn,board:this.board}),function(t){return t=Ht(t),new gG(t._repo,t._path)}(this.userRef).remove())}),this.countPieces()}onPieceClick(n,r,i){this.usersColor===this.playerTurn&&(1===n&&"black"===this.playerTurn||3===n&&"black"===this.playerTurn||-1===n&&"red"===this.playerTurn||-3===n&&"red"===this.playerTurn||0===n)&&(this.clickedCurrentPos&&0===n?(this.clickedNewPos={x:r,y:i},this.moveChecker(this.board,this.clickedCurrentPos,this.clickedNewPos),this.countPieces(),this.clickedCurrentPos=null,this.clickedNewPos=null):!this.clickedCurrentPos&&(1===n||-1===n||3===n||-3===n)&&(this.clickedCurrentPos={x:r,y:i}))}countPieces(){this.redCheckersRemaining=[],this.blackCheckersRemaining=[],this.board.forEach(n=>n.forEach(r=>{(1===r||3===r)&&this.blackCheckersRemaining.push(r),(-1===r||-3===r)&&this.redCheckersRemaining.push(r)})),0===this.redCheckersRemaining.length&&(alert("Black Wins!!"),this.board=[[0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[-1,0,-1,0,-1,0,-1,0],[0,-1,0,-1,0,-1,0,-1],[-1,0,-1,0,-1,0,-1,0]],this.countPieces()),0===this.blackCheckersRemaining.length&&(alert("Red Wins!!"),this.board=[[0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[-1,0,-1,0,-1,0,-1,0],[0,-1,0,-1,0,-1,0,-1],[-1,0,-1,0,-1,0,-1,0]],this.countPieces())}moveChecker(n,r,i){if(r.x<0||r.x>7||r.y<0||r.y>7||i.x<0||i.x>7||i.y<0||i.y>7)return void alert("Invalid position");if(0===n[r.x][r.y])return void alert("No checker at current position");let s=n[r.x][r.y];if(s>0&&"red"===this.playerTurn||s<0&&"black"===this.playerTurn)alert("It's not your turn");else if(s>0&&7===i.x&&3!==s?s+=2:s<0&&0===i.x&&-3!==s&&(s-=2),(s>1||s<-1)&&Math.abs(i.x-r.x)!==Math.abs(i.y-r.y))alert("Invalid move for king");else{if(!(1===s&&i.x<r.x||-1===s&&i.x>r.x)){if(2===Math.abs(i.x-r.x)&&2===Math.abs(i.y-r.y)){const a={x:(r.x+i.x)/2,y:(r.y+i.y)/2},l=1===s?3:-3;if(s>1||s<-1){const u=3===s?1:-1;if(0===n[a.x][a.y]||n[a.x][a.y]===s||n[a.x][a.y]===u)return void console.log("cannot jump same team")}else if(0===n[a.x][a.y]||n[a.x][a.y]===s||n[a.x][a.y]===l)return void console.log("Invalid capture");n[a.x][a.y]=0}else{if(3!==s&&1!==Math.abs(i.x-r.x)||1!==Math.abs(i.y-r.y))return void alert("Invalid move");if(-3!==s&&1!==Math.abs(i.x-r.x)||1!==Math.abs(i.y-r.y))return void alert("Invalid move")}return n[i.x][i.y]=s,n[r.x][r.y]=0,this.toggleTurn(),Us(this.boardRef,{team:this.playerTurn,board:n}),n}alert("Checker cannot move backwards")}}toggleTurn(){this.playerTurn="red"===this.playerTurn?"black":"red",Us(this.boardRef,{team:this.playerTurn,board:this.board})}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=Gc({type:t,selectors:[["app-root"]],decls:16,vars:12,consts:[[2,"float","left","width","70%"],[3,"ngStyle"],[3,"ngStyle","click"],[4,"ngFor","ngForOf"],[2,"float","left","width","30%"],[3,"ngStyle","click",4,"ngFor","ngForOf"]],template:function(n,r){1&n&&(Tt(0,"div",0),Tt(1,"h2"),Zr(2),Tt(3,"b",1),Zr(4),St(),St(),Tt(5,"h3",2),Ol("click",function(){return r.toggleTurn()}),Zr(6),Tt(7,"button"),Zr(8,"change turn"),St(),St(),Tt(9,"div"),Ef(10,$G,2,1,"p",3),St(),St(),Tt(11,"div",4),Tt(12,"p"),Zr(13),St(),Tt(14,"p"),Zr(15),St(),St()),2&n&&(In(2),Xr("",r.title," | your color: "),In(1),Jr("ngStyle",th(8,kS,r.usersColor)),In(1),Rf(r.usersColor),In(1),Jr("ngStyle",th(10,kS,r.playerTurn)),In(1),Xr("",r.playerTurn,"'s turn -- "),In(4),Jr("ngForOf",r.board),In(3),Xr("Black checkers remaining: ",r.blackCheckersRemaining.length,""),In(2),Xr("Red checkers remaining: ",r.redCheckersRemaining.length,""))},directives:[Qb,Wb],styles:["p[_ngcontent-%COMP%]{margin:-5px 0}span[_ngcontent-%COMP%]{display:inline-block;width:4rem;height:4rem;border:1px dotted}"]}),t})(),GG=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Gs({type:t,bootstrap:[WG]}),t.\u0275inj=Fr({providers:[],imports:[[zB]]}),t})();(function(){if(eb)throw new Error("Cannot enable prod mode after platform setup.");XD=!1})(),GB().bootstrapModule(GG).catch(t=>console.error(t))}},Ze=>{Ze(Ze.s=9)}]);